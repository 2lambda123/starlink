
# File: @staretcdir@/profile
# Init Version: @VERSION@
# From CVS $Revision$

# This file must be sourced before Starlink software can be used.
# This script contains environment and alias definitions and must
# be sourced rather than executed. It is suitable for use from a bash
# shell

# This can be achieved by addinf the line:
#
#    source @staretcdir@/profile
#
# to your .profile file. for the ultra paranoid, add a check for file
# existence as well.

# Break the file up along the lines of the cshrc and login rather
# than combining tests into a single block.

# Make ${1+"$@"} portability feature work on zsh, too.
test "${ZSH_VERSION+set}" = set && alias -g '${1+"$@"}'='"$@"'


# Define the Starlink environment first

#  ATOOLS

if test -f @bindir@/atools/atools.sh; then
   export ATOOLS_DIR=@bindir@/atools
   export ATOOLS_HELP=@starhelpdir@/atools/atools
fi

#  CCDPACK

if test -f @bindir@/ccdpack/ccdpack.sh; then
   export CCDPACK_DIR=@bindir@/ccdpack
   export CCDPACK_HELP=@starhelpdir@/ccdpack/ccdpack
fi

#  Convert

if test -f @bindir@/convert/convert.sh; then
   export CONVERT_DIR=@bindir@/convert
   export CONVERT_HELP=@starhelpdir@/convert/convert
fi

#  CUPID

if test -f @bindir@/cupid/cupid.sh; then
   export CUPID_DIR=@bindir@/cupid
   export CUPID_HELP=@starhelpdir@/cupid/cupid
fi

#
#  EXTRACTOR

if test -f @bindir@/extractor/extractor.sh; then
   export EXTRACTOR_DIR=@bindir@/extractor
   export EXTRACTOR_HELP=@starhelpdir@/extractor/extractor
fi

#  Fluxes

if test -f @bindir@/fluxes/fluxes.csh; then
   export FLUXES_DIR=@bindir@/fluxes
fi

#  GAIA

if test -f @bindir@/gaia/gaia.csh; then
   export GAIA_DIR=@bindir@/gaia
fi

#  Kappa

if test -f @bindir@/kappa/kappa.sh; then
   export KAPPA_DIR=@bindir@/kappa
   export KAPPA_HELP=@starhelpdir@/kappa/kappa
fi

#  Kappa Retirement Home (kaprh)

if test -f @bindir@/kaprh/kaprh.sh; then
   export KAPRH_DIR=@bindir@/kaprh
   export KAPRH_HELP=@starhelpdir@/kaprh/kaprh
fi

#  HDSTOOLS

if test -f @bindir@/hdstools/hdstools.sh; then
   export HDSTOOLS_DIR=@bindir@/hdstools
   export HDSTOOLS_HELP=@starhelpdir@/hdstools/hdstools
fi

#  HDSTRACE

if test -f @bindir@/hdstrace; then
   export HDSTRACE_DIR=@bindir@/
   export HDSTRACE_HELP=@starhelpdir@/hdstrace
fi

#
#  ICL
#

if test -x @bindir@/icl; then
   export ADAM_PACKAGES=@starhelpdir@/adam_packages.shl
   export ICL_LOGIN_SYS=@staretcdir@/icl_login_sys.icl
fi
 

#  JPL

if test -f @staretcdir@/jpleph.dat; then
   export JPL_DIR=@staretcdir@
fi

#  PERIOD

if test -f @bindir@/period/period; then
   export PERIOD_DIR=@bindir@/period
   export PERIOD_HELP=@starhelpdir@/period
fi

#  Polpack

if test -f @bindir@/polpack/polpack.sh; then
   export POLPACK_DIR=@bindir@/polpack
   export POLPACK_HELP=@starhelpdir@/polpack/polpack
fi

#
#  PHOTOM

if test -f @bindir@/photom/photom.sh; then
   export PHOTOM_DIR=@bindir@/photom
   export PHOTOM_HELP=@starhelpdir@/photom/photomhelp
fi

#
#  PONGO
#

if test -f @bindir@/pongo/pongo.icl; then
   export PONGO_BIN=@bindir@/pongo
   export PONGO_HELP=@starhelpdir@/pongo/pongohelp
   export PONGO_EXAMPLES=@datadir@/pongo
fi

#  SMURF

if test -f @bindir@/smurf/smurf.sh; then
   export SMURF_DIR=@bindir@/smurf
   export SMURF_HELP=@starhelpdir@/smurf/smurf
fi

#
#  SPECX
#

if test -f @datadir@/specx/specxstart.sh; then
   export SYS_SPECX=@datadir@/specx
   export SPECX_HELP=@starhelpdir@/specx
fi

#  SST

if test -f @bindir@/sst/sst.sh; then
   export SST_DIR=@bindir@/sst
   export SST_HELP=@starhelpdir@/sst/sst
fi

#  STILTS

if test -x @starjavadir@/bin/stilts; then
   export STILTS_DIR=@starjavadir@/bin/stilts
fi

#  SURF

if test -f @bindir@/surf/surf.sh; then
   export SURF_DIR=@bindir@/surf
   export SURF_HELP=@starhelpdir@/surf/surf
fi

#  TSP

if test -f @bindir@/tsp/tsp.sh; then
   export TSP_DIR=@bindir@/tsp
fi

# Aliases
# Use sh functions rather than bash aliases for improved
# portability. Use 'declare -F' in bash to list all the functions.

# ATOOLS

if test -f @bindir@/atools/atools.sh; then
  atools () { . $ATOOLS_DIR/atools.sh; }
  atools () { . $ATOOLS_DIR/atools.sh; }
else
  atools () { @staretcdir@/notinst atools; }
  atoolssetup () { @staretcdir@/notinst atools; }
fi

# CCDPACK

if test -f @bindir@/ccdpack/ccdpack.sh; then
  ccdpack () { . $CCDPACK_DIR/ccdpack.sh; }
  ccdpacksetup () { . $CCDPACK_DIR/ccdpack.sh; }
else
  ccdpack () { @staretcdir@/notinst ccdpack; }
  ccdpacksetup () { @staretcdir@/notinst ccdpack; }
fi

# CONVERT

if test -f @bindir@/convert/convert.sh; then
  convert () { . $CONVERT_DIR/convert.sh; }
  convertsetup () { . $CONVERT_DIR/convert.sh; }
else
  convert () { @staretcdir@/notinst convert; }
  convertsetup () { @staretcdir@/notinst convert; }
fi

# CUPID

if test -f @bindir@/cupid/cupid.sh; then
  cupid () { . $CUPID_DIR/cupid.sh; }
  cupidsetup () { . $CUPID_DIR/cupid.sh; }
else
  cupid () { @staretcdir@/notinst cupid; }
  cupidsetup () { @staretcdir@/notinst cupid; }
fi

# DIPSO

if test -f @bindir@/dipso/dipsosetup.sh; then
  dipsosetup () { . @bindir@/dipso/dipsosetup.sh; }
  dipso () { . @bindir@/dipso/dipsosetup.sh; }
else
  dipsosetup () { @staretcdir@/notinst dipsosetup; }
  dipso () { @staretcdir@/notinst dipso; }
fi


#
#   Extractor
#

if test -f @bindir@/extractor/extractor.sh; then 
   extractorsetup () { . @bindir@/extractor/extractor.sh; }
   extractsetup () { . @bindir@/extractor/extractor.sh; }
   extractor () { . @bindir@/extractor/extractor.sh; }
   extract () { . @bindir@/extractor/extractor.sh; }
else
   extractorsetup () { @staretcdir@/notinst extractorsetup; }
   extractsetup () { @staretcdir@/notinst extractsetup; }
   extractor () { @staretcdir@/notinst extractor; }
   extract () { @staretcdir@/notinst extract; }
fi

# Fluxes

if test -f @bindir@/fluxes/fluxes; then
  fluxes () { $FLUXES_DIR/fluxes.csh; }
  fluxnow () { $FLUXES_DIR/fluxnow.csh; }
else
  fluxes () { @staretcdir@/notinst fluxes; }
  fluxnow () { @staretcdir@/notinst fluxnow; }
fi

#
#   Gaia
#

if test -f @bindir@/gaia/gaia.csh; then
   gaia () { $GAIA_DIR/gaia.csh ${1+"$@"}; }
   gaiadisp () { $GAIA_DIR/gaiadisp.csh ${1+"$@"}; }
else
   gaia () { @staretcdir@/notinst gaia; }
   gaiadisp () { @staretcdir@/notinst gaiadisp; }
fi

# Kappa

if test -f @bindir@/kappa/kappa.sh; then
  kappa () { . $KAPPA_DIR/kappa.sh; }
  kappasetup () { . $KAPPA_DIR/kappa.sh; }
else
  kappa () { @staretcdir@/notinst kappa; }
  kappasetup () { @staretcdir@/notinst kappa; }
fi

# Kappa Retirement Home (KAPRH)

if test -f @bindir@/kaprh/kaprh.sh; then
  kaprh () { . $KAPRH_DIR/kaprh.sh; }
  kaprhsetup () { . $KAPRH_DIR/kaprh.sh; }
else
  kaprh () { @staretcdir@/notinst kaprh; }
  kaprhsetup () { @staretcdir@/notinst kaprh; }
fi

# HDSTOOLS

if test -f @bindir@/hdstools/hdstools.sh; then
  hdstools () { . $HDSTOOLS_DIR/hdstools.sh; }
  hdstoolssetup () { . $HDSTOOLS_DIR/hdstools.sh; }
else
  hdstools () { @staretcdir@/notinst hdstools; }
  hdstoolssetup () { @staretcdir@/notinst hdstools; }
fi

# Polpack

if test -f @bindir@/polpack/polpack.sh; then
  polpack () { . $POLPACK_DIR/polpack.sh; }
  polpacksetup () { . $POLPACK_DIR/polpack.sh; }
else
  polpack () { @staretcdir@/notinst polpack; }
  polpacksetup () { @staretcdir@/notinst polpack; }
fi

#
#   Photom
#

if test -f @bindir@/photom/photom.sh; then
   photomstart () { . $PHOTOM_DIR/photom.sh; }
   photom () { . $PHOTOM_DIR/photom.sh; }
   photomsetup () { . $PHOTOM_DIR/photom.sh; }
else
   photomstart () { @staretcdir@/notinst photomstart; }
   photom () { @staretcdir@/notinst photom; }
   photomsetup () { @staretcdir@/notinst photomsetup; }
fi

#
#   Pongo
#

if test -f @bindir@/pongo/pongo.icl; then
   pongo () { icl $PONGO_BIN/pongo; }
else
   pongo () { @staretcdir@/notinst pongo; }
fi

# SMURF - SCUBA-2 SURF

if test -f @bindir@/smurf/smurf.sh; then
  smurf () { . $SMURF_DIR/smurf.sh; }
  smurfsetup () { . $SMURF_DIR/smurf.sh; }
else
  smurf () { @staretcdir@/notinst smurf; }
  smurfsetup () { @staretcdir@/notinst smurf; }
fi

#
# SPECX
#

if test -f @datadir@/specx/specxstart.sh; then
  specx () { . $SYS_SPECX/specxstart.sh; command specx; }
  specxsetup () { . $SYS_SPECX/specxstart.sh; }
  specxstart () { . $SYS_SPECX/specxstart.sh; }
else
  specx () { @staretcdir@/notinst specx; }
  specxsetup () { @staretcdir@/notinst specxsetup; }
  specxstart () { @staretcdir@/notinst specxstart; }
fi

# SST

if test -f @bindir@/sst/sst.sh; then
  sst () { . $SST_DIR/sst.sh; }
  sstsetup () { . $SST_DIR/sst.sh; }
else
  sst () { @staretcdir@/notinst sst; }
  sstsetup () { @staretcdir@/notinst sst; }
fi

# SURF

if test -f @bindir@/surf/surf.sh; then
  surf () { . $SURF_DIR/surf.sh; }
  surfsetup () { . $SURF_DIR/surf.sh; }
else
  surf () { @staretcdir@/notinst surf; }
  surfsetup () { @staretcdir@/notinst surf; }
fi

# TSP

if test -f @bindir@/tsp/tsp.sh; then
  tsp () { . $TSP_DIR/tsp.sh; }
  tspsetup () { . $TSP_DIR/tsp.sh; }
else
  tsp () { @staretcdir@/notinst tsp; }
  tspsetup () { @staretcdir@/notinst tsp; }
fi

# Done

export STAR_LOGIN=''
