# $Id$
#
# gaiaInit.tcl - This script generates a mktclapp config file on stdout.
#
# who             when       what
# --------------  ---------  ----------------------------------------
# Peter W. Draper 12 May 99  Created, based on skyCatInit.tcl
proc main {} {
   global argv argc env argv0
   
   if {$argc != 1} {
      puts "usage: gaiaInit.tcl output_file_name"
      exit 1
   }
   set outfile [lindex $argv 0]
   set fd [open $outfile w]
   
   #  Set names of source directories.
   set tcl_library      @TCL_LIBRARY@
   set tk_library       @TK_LIBRARY@
   set itcl_library     @ITCL_LIBRARY@
   set itk_library      @ITK_LIBRARY@
   set tclutil_library  @TCLUTIL_LIBRARY@
   set astrotcl_library @ASTROTCL_LIBRARY@
   set cat_library      @CAT_LIBRARY@
   set rtd_library      @RTD_LIBRARY@
   set skycat_library   @SKYCAT_LIBRARY@
   set gaia_library     @GAIA_BUILD_LIBRARY@
   set iwidgets_library @IWIDGETS_LIBRARY@
   set iscripts_library @IWIDGETS_LIBRARY@/scripts
   set tclx_library     @TCLX_LIBRARY@
   set startcl_library  @STARTCL_LIBRARY@
   
   set srcdirs [list \
                   $tcl_library \
                   $tk_library \
                   $itcl_library \
                   $itk_library \
                   $tclx_library \
                   $iwidgets_library \
                   $iscripts_library \
                   $tclutil_library \
                   $astrotcl_library \
                   $rtd_library \
                   $cat_library \
                   $skycat_library \
                   $startcl_library \
                   $gaia_library]
   
   #  Set location of startup script.
   puts $fd "-main-script \"${gaia_library}/gaiaMain.tcl\""
   
   #  Binary is standalone (only during testing). Stops sourcing of 
   #  external files otherwise.
   # puts $fd "-standalone"
   
   #  Set location of Tcl and Tk.
   puts $fd "-tcl-library \"$tcl_library\""
   puts $fd "-tk-library \"$tk_library\""
   
   #  Name of the Et_AppInit file.
   puts $fd "tkAppInit.C"
   
   #  Now add all the Tcl file from everywhere.
   foreach dir $srcdirs {
      if {[file exists $dir/tclIndex]} {
         puts $fd "-dont-strip-tcl \"$dir/tclIndex\""
      }
      set tclfiles [glob -nocomplain $dir/*.tcl $dir/*.itk $dir/*.itcl]
      foreach file "$tclfiles" {
         puts $fd "-dont-strip-tcl \"$file\""
      }
   }
}
main
exit

