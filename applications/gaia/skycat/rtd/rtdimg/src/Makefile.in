#*******************************************************************************
# E.S.O. - VLT project
#
# "@(#) $Id: Makefile.in,v 1.17 1998/05/17 15:40:50 abrighto Exp $"
#
# ------------------------------------------------------------------------
# 	Makefile for RtdImage library
# ------------------------------------------------------------------------

# ------------------------------------------------------------------------

# C compiler
CC           	= @CC@

# C++ compiler
CXX           	= @CXX@

# Compiler flags
CFLAGS  	= @CXXDEBUGFLAGS@

# install dirs
TOPDIR      	= @DESTDIR@
LIBDIR      	= @LIBDIR@

# for make depend
DEPEND_TARGET	= @DEPEND_TARGET@

# info needed for shared libraries (see configure.in or tclConfig.sh for an explanation)
SHLIB_CFLAGS=@SHLIB_CFLAGS@

# Directories containing Tcl and Tk include files and libraries
TCL_INCLUDE   	= @TCLINCSW@
TK_INCLUDE    	= @TKINCSW@
X_INCLUDE     	= @XINCSW@

# Take include files from the build dirs, if present
BUILD_INCLUDES  = @TCLUTIL_BUILD_INCLUDES@ \
		  @ASTROTCL_BUILD_INCLUDES@
# ------------------------------------------------------------------------

# source files
SRCS 		=  RtdImage.C ImageZoom.C RtdCamera.C RtdRemote.C ImageDisplay.C \
		   ImageColor.C ColorMapInfo.C ITTInfo.C rtd_bitmaps.C colormaps.C \
		   RtdPerformanceTool.C RtdRPTool.C RtdRPFile.C 

# object files
OBJS 		=  RtdImage.o ImageZoom.o RtdCamera.o RtdRemote.o ImageDisplay.o \
		   ImageColor.o ColorMapInfo.o ITTInfo.o rtd_bitmaps.o colormaps.o \
		   RtdPerformanceTool.o RtdRPTool.o RtdRPFile.o

# name of local archive file
libname  	= ../lib/librtdimage.a

# include flags
INCLUDES	= -I../include  \
	          -I../bitmaps \
		  -I../../rtilib/include \
		  -I../../rtdevt/include \
		  $(BUILD_INCLUDES) \
		  -I$(TOPDIR)/include/astrotcl \
		  -I$(TOPDIR)/include/tclutil \
		  $(TK_INCLUDE) $(TCL_INCLUDE) $(X_INCLUDE)

# define package versions
DEFINES       	= \
		-DRTD_VERSION=\"@RTD_VERSION@\" \
		-DRTD_LIBRARY=\"@RTD_LIBRARY@\" \
		-DASTROTCL_VERSION=\"@ASTROTCL_VERSION@\"

CC_SWITCHES	= $(SHLIB_CFLAGS) $(DEFINES) $(INCLUDES) $(CFLAGS)
DEPEND_FLAGS    = $(CC_SWITCHES) @CXX_INCLUDE@ @CXX_DEPEND_FLAGS@
INSTALL  	= @INSTALL@
INSTALL_DATA  	= @INSTALL_DATA@
RANLIB   	= @RANLIB@
SHELL    	= /bin/sh
AR       	= ar rc
RM       	= rm -f

# --------------------------------------------------------------------------------------
all: dirs $(libname) 

$(libname): $(OBJS)
	$(RM) $@
	$(AR) $@ $(OBJS)
	$(RANLIB) $@

# recompile if configure is run, since -D flags might have changed
$(OBJS): ../../config.status

All: 
	cd ../..; $(MAKE)


install: 

dirs:
	@test -d ../lib || mkdir ../lib
	@test -d ../bin || mkdir ../bin

clean:
	$(RM) $(OBJS) $(libname) *\~ "#"*

distclean: clean depclean
	rm -f Makefile	

tags:
	etags ../../*/*/*.[Cch]

.SUFFIXES: .C
.c.o:
	$(CC) -c $(CC_SWITCHES) $<

.C.o:
	$(CXX) -c $(CC_SWITCHES) $<

man:

include ../../depend.mk

