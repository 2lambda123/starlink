#+
#  Name:
#     smurf_sc2clean.def

#  Purpose:
#     Default parameters for SMURF application MAKEMAP.

#  Description:
#     This file specifies the default parameters for the SC2CLEAN
#     application.The main purpose of this file is to
#     guarantee an initial state for all parameters and to define all
#     the allowed parameters so that a user will be notified in case
#     of spelling mistakes.
#
#     This file is also loaded by the map maker defaults file.

#  Notes:
#     This file does not attempt to document what each value
#     means.

#  Authors:
#     TIMJ: Tim Jenness (JAC, Hawaii)

#  History:
#     2010-06-09 (TIMJ):
#        Original version. Factored out from smurf_makemap.def for clarity.

#-

# These are read in smf_get_cleanpar

apod = 0
badfrac = 0.05
dcfitbox = 0
dcmaxsteps = 10
dclimcorr = 10
dcthresh = 25.0
dcsmooth = 50
dkclean = 0
fillgaps = 0
zeropad = 0
filt_edgelow = 0
filt_edgehigh = 0
filt_edge_smallscale = 0
filt_edge_largescale = 0
filt_notchlow = <undef>
filt_notchhigh = <undef>
filt_wlim = <undef>
whiten = 0
flagslow = 0
flagfast = 0
order = -1
spikethresh = 0
spikebox = 50
noisecliphigh = 0
noisecliplow = 0
noiseclipprecom = 0
pcalen = 0
pcathresh = 0
groupsubarray = 0

# These are read in smf_clean_smfArray

opteffs8a = <undef>
opteffs8b = <undef>
opteffs8c = <undef>
opteffs8d = <undef>
opteffs4a = <undef>
opteffs4b = <undef>
opteffs4c = <undef>
opteffs4d = <undef>

#  If set non-zero, the bolometer data is divided by the values read from
#  the optical efficiency files. Otherwise, the bolometer data is multiplied by
#  the values read from the optical efficiency files.
opteffdiv = 1

# these are analogous cleaning parameters for dark squids
# We do not have a clever syntax for recursively reading this
# routine with a "cleandk" prefix so we have to duplicate all
# the above values.

cleandk.apod = 0
cleandk.badfrac = 0
cleandk.dcfitbox = 0
cleandk.dcmaxsteps = 10
cleandk.dclimcorr = 10
cleandk.dcthresh = 25.0
cleandk.dcsmooth = 50
cleandk.fillgaps = 1
cleandk.zeropad = 0
cleandk.filt_edgelow = 0
cleandk.filt_edgehigh = 0
cleandk.filt_edge_smallscale = 0
cleandk.filt_edge_largescale = 0
cleandk.filt_notchlow = <undef>
cleandk.filt_notchhigh = <undef>
cleandk.order = 0
cleandk.spikethresh = 0
cleandk.spikebox = 50
cleandk.noisecliphigh = 0.0
cleandk.noisecliplow = 0.0
cleandk.noiseclipprecom = 0
cleandk.filt_wlim = <undef>
cleandk.whiten = 0
cleandk.flagslow = 0
cleandk.flagfast = 0
cleandk.compreprocess = 0
cleandk.pcalen = 0
cleandk.pcathresh = 0

# the following two parameters are included because the same
# code is used to clean bolometers and the dark squids. However,
# in the context of cleaning dark squids they are meaningless
# and are simply turned off.

cleandk.dkclean = 0
cleandk.flagstat = 0

# -------------------------------------------------------------------------
# we can use smf_calcmodel_com to remove the common-mode as a
# pre-processing step, so we have the com.* and gai.* parameter
# defaults here

# set this parameter to remove common-mode as a pre-processing step.
# In this case it is still possible to use COM/GAI as model parameters
# in the iterative solution.
compreprocess = 0

com.oldalg = 0

com.boxcar = 0
com.boxcard = 0
com.boxfact = 0
com.boxmin = 0

com.noflag = 0
com.corr_tol = 5
com.corr_abstol = 0.2
com.gain_positive = 1
com.gain_tol = 5
com.gain_fgood = 0.25
com.gain_rat = 4
com.gain_abstol = 3
com.gain_box = -30.0
com.fit_box = <undef>
com.notfirst = 0
com.noremove = 0
com.perarray = 0

# Setting com.gain_is_one non-zero causes all bolometer gains to be
# forced to 1.0. Setting com.offset_is_zero non-zero causes all
# bolometer offsets to be forced to 0.0. The correlation coefficients
# are retained so that bad bolometer blocks are still identified and
# rejected.

com.gain_is_one = 0
com.offset_is_zero = 0

gai.flatfield = 0

#  The number of n-sigma clipping iterations to apply when finding the
#  common mode signal at any time slice. The n-sigma clipping algorithm
#  finds the clipped mean of all bolometer values at a single time slice,
#  and this value is used as the common mode signal. A value of 1 means
#  that no clipping is done (the unclipped mean found on the first
#  iteration is used).
com.niter = 1

#  The number of standard deviations at which the n-sigma clipping
#  algorithm clips. See com.niter.
com.nsigma = 3

