# Makefile for ssn70 - documentation
#
# relies on env var STARLINK_SGML_DIR being set correctly
#
# $Id$

STARLINK_SGML_DIR=@STARLINK_SGML_DIR@

SGML2DOCS=$(STARLINK_SGML_DIR)/bin/sgml2docs

all: ssn70.tar-htx ssn70.tar-texml

ssn70.tar-htx: ssn70.sgml ReleaseNotes \
		../dtd2sgml/sgmltext.stamp ../../misc/misc.stamp
	SGML_CATALOG_FILES=$$PWD/../documents/CATALOG:$(STARLINK_SGML_DIR)/dtd/CATALOG \
		BIBINPUTS=$$PWD \
		$(SGML2DOCS) --html --tarball=$@ ssn70.sgml

ssn70.tar-tex: ssn70.sgml ReleaseNotes \
		../dtd2sgml/sgmltext.stamp ../../misc/misc.stamp
	SGML_CATALOG_FILES=$$PWD/../documents/CATALOG:$(STARLINK_SGML_DIR)/dtd/CATALOG \
		BIBINPUTS=$$PWD \
		$(SGML2DOCS) --latex --tarball=$@ ssn70.sgml

ssn70.tar-texml: ssn70.sgml ReleaseNotes \
		../dtd2sgml/sgmltext.stamp ../../misc/misc.stamp
	SGML_CATALOG_FILES=$$PWD/../documents/CATALOG:$(STARLINK_SGML_DIR)/dtd/CATALOG \
		BIBINPUTS=$$PWD \
		$(SGML2DOCS) --texml --tarball=$@ ssn70.sgml

../../misc/misc.stamp:
	cd ../../misc; $(MAKE) misc.stamp
../dtd2sgml/sgmltext.stamp:
	cd ../dtd2sgml; $(MAKE) sgmltext.stamp
