#+
#  Name:
#     makefile

#  Purpose:
#     Build IRG for UNIX.

#  Type of Module:
#     Description file for the "make" command.

#  Description:
#     This description file is used by the "make" command to build
#     IRG from the released source code files on a UNIX system and
#     to install the resulting system on Starlink machines.

#  Invocation:
#     make [build]
#        Causes make to build the target "build". This results in compilation
#        of the source files and creation of the executables and object
#        libraries
#     make clean
#        Causes make to clean up after building the system, deleting all
#        intermediate files created during the building process.
#     make test
#        Causes make to run a test program to check for correct installation
#        of IRG.
#
# --------- no install/deinstall at present assumes local directory ----------
#     make install
#        Causes make to install components of the built system into the
#        appropriate directories on Starlink machines.
#     make deinstall
#        Causes make to de-install components of the built system from the
#        appropriate directories on Starlink systems.
# ----------------------------------------------------------------------------

#  External Dependencies:
#     The IRG package depends on the following external files and systems,
#     which must previously have been installed in the appropriate Starlink
#     local and directories:
#        IRH
#           List access routines - must be in the default directory.
#        fio
#           File access, input and output.
#        ndf
#           NDF data format libraries.
#        ary
#           Array access routines.
#        chr
#           Character Handling Routines.
#        ems
#           Error and message routines.
#        hds
#           Hierarchical Data System.
#        adam
#           ADAM unix kernel.

#  Authors:
#     PDRAPER: P.W. Draper (STARLINK)
#     {enter_new_authors_here}

#  History:
#     26-MAR-1992 (PDRAPER):
#        Original Version
#     {note_further_changes_here}

#-

#  Define targets for building IRG
build: libirg.a irg_par irg_err irg_com 

#  Target for cleaning up the directory
clean:
	 -rm *.o *.f *.c

#  Macros defining various source code
IRGSRC = irg1_axlim.f irg1_brack.f irg1_check.f irg1_fspec.f \
	irg1_lasto.f irg1_ncut.f irg1_ndfch.f irg1_slice.f \
	irg1_vmode.f irg_creat.f irg_get.f irg_gin.f irg_group.f \
	irg_ndfcr.f irg_ndfex.f irg_ndfpr.f find_file.c

#  Macros defining various object modules
IRGOBJ = irg1_axlim.o irg1_brack.o irg1_check.o irg1_fspec.o \
	irg1_lasto.o irg1_ncut.o irg1_ndfch.o irg1_slice.o \
	irg1_vmode.o irg_creat.o irg_get.o irg_gin.o irg_group.o \
	irg_ndfcr.o irg_ndfex.o irg_ndfpr.o find_file.o

# Rules for extracting source code.
$(IRGSRC) : irg.a
	ar x irg.a $@

# Rules for building object libraries.
libirg.a : $(IRGOBJ)
	ar r libirg.a $?
	ranlib libirg.a

#  End of makefile.
# $Id$
