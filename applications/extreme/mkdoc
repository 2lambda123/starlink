#!/bin/sh

#  Put autogenerated routine descriptions in SSN/73.
     SST_DIR=/stardev/local/bin/sst
     export SST_DIR
     rm -f inscnf.tex frepint.tex crepint.tex \
           extmk.tex extmakefile.tex do-filter.tex cmp-filter.tex
     for f in inscnf frepint crepint extmk extmakefile do-xxx cmp-xxx
     do
        rm -f $f.tex
        case $f in
           inscnf | frepint | crepint)
              in=$f.c 
              ;;
           extmk | extmakefile | do-xxx | cmp-xxx)   
              sed 's/^#/\*/' <$f >tmp
              in=tmp 
              ;;
        esac
        $SST_DIR/prolat in=$in out=$f.tex nodocument single
     done

     for f in do-xxx cmp-xxx
     do
        sprog=""
        for p in crepint frepint inscnf do-xxx cmp-xxx
        do
           if [ "$f" = "$p" ]
           then
              :
           else
              sprog="$sprog -e 's/ $p / \\\\xroutine{$p} /'"
           fi
        done
        eval "sed $sprog" < $f.tex > tmp.tex
        mv tmp.tex $f.tex
     done

     sed -n '1,/%%%% Begin filter descriptions/p' <ssn73.tex >tmp.ssn73.tex
     cat \
        crepint.tex \
        frepint.tex \
        inscnf.tex \
        extmk.tex \
        extmakefile.tex \
        cmp-xxx.tex \
        do-xxx.tex \
           >>tmp.ssn73.tex
     sed -n '/%%%% End filter descriptions/,$p' <ssn73.tex >>tmp.ssn73.tex
     mv tmp.ssn73.tex ssn73.tex

#  Make dvi file.
     latex ssn73.tex
     latex ssn73.tex
     latex ssn73.tex

#  Make htx file.
     star2html -aux ssn73.tex

#  Make htx_tar file.
     tar cvf ssn73.htx_tar ssn73.htx

