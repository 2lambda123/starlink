\ProvidesPackage{sst}

%%%%
% Packet for formatting latex code output from prolat
%%%%%


%%% Create a new section class (at subsection level) for the sst routines
\RequirePackage{titlesec}


%...  New subsection sstrefsection
\titleclass{\sstrefsection}{straight}[\subsection]
\newcounter{sstrefsection}
\renewcommand{\thesstrefsection}{\arabic{sstrefsection}}


%...  Formatting the title for sstrefsection
\titleformat{name=\sstrefsection}%
{\normalfont\Large\bfseries\centering}{}{0pt}{\rule{\textwidth}{0.5mm}}[\rule{\textwidth}{0.5mm}]
\titlespacing*{\sstrefsection}{0pt}{3.5ex plus 1ex minus .2ex}{2.3ex plus .2ex}

%...  Command to turn name and short description into single variable for title.
\newcommand{\sstsectitle}[2]{{\centering #1}\newline{\normalfont\Large #2}}

% ..  Command to completely remove section from contents so it can be added in manually at the correct section.
\newcommand{\nocontentsline}[3]{}
\newcommand{\tocless}[2]{\bgroup\let\addcontentsline=\nocontentsline#1{#2}\egroup}


\newcommand{\ssttitle}[2]{
  \tocless\sstrefsection{\sstsectitle{#1}{#2}}
    \addcontentsline{toc}{subsection}{\protect\numberline{}\RemoveSpaces{#1}}}
%...  Basic command for producing the routine
\newcommand{\sstroutine}[3]{
  
  % Create the section.
  \ssttitle{#1}{#2}

  % Set the first parameter as the label; need to remove spaces first.
  \label{\RemoveSpaces{#1}}

  %..  change the mark on the left hand side to include the name of the chapter.
  \markright{\textit{\RemoveSpaces{#1}}}
  \fancyhead[RE,LO]{\thepage\hspace{1cm}\rightmark}

  %..  Nest all the material within a description
  \begin{description}[style=nextline]
    #3
  \end{description}

  % End the page
  \clearpage
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% an environment for references (for the SST sstdiytopic command).
\newenvironment{refs}{\vspace{-4ex} % normally 3ex
                      \begin{list}{}{\setlength{\topsep}{0mm}
                                     \setlength{\partopsep}{0mm}
                                     \setlength{\itemsep}{0mm}
                                     \setlength{\parsep}{0mm}
                                     \setlength{\leftmargin}{1.5em}
                                     \setlength{\itemindent}{-\leftmargin}
                                     \setlength{\labelsep}{0mm}
                                     \setlength{\labelwidth}{0mm}}
                    }{\end{list}}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%..  Define a \tt font of the required size.
\latex{\newfont{\ssttt}{cmtt10 scaled 1095}}

\newlength{\sstbannerlength}
\newlength{\sstcaptionlength}
\newlength{\sstexampleslength}
\newlength{\sstexampleswidth}

\newcommand{\sstdescription}[1]{\item[Description:] #1 }
\newcommand\vitem[1][]{\SaveVerb[%
    aftersave={\item[\textnormal{\UseVerb[#1]{vsave}}]}]{vsave}}

\newcommand{\sstusage}[1]{\item[Usage:]{\raggedright \tt #1}}%\item[Usage:] \begin{Verbatim} #1 \end{Verbatim}}
\newcommand{\sstparameters}[1]{\item[Parameters:]
\begin{description}[style=nextline]\item[] #1 \end{description}}
\newcommand{\sstsubsection}[2]{\item[{#1}] #2}
\newcommand{\sstnotes}[1]{\item[Notes:] #1}
\newcommand{\sstdiylist}[2]{\item[#1] #2}
\newcommand{\sstimplementationstatus}[1]{\item[Implementation Status:]
  #1}
\newcommand{\sstbugs}[1]{\item[Bugs:] #1}
\newcommand{\sstdiytopic}[2]{\item[#1:]
\mbox{} #2}

%  Format a list of items while in paragraph mode.
\newcommand{\sstitemlist}[1]{
  \begin{itemize}
     #1
  \end{itemize}
}
\newcommand{\sstexamplesubsection}[2]{\sloppy
\item[\parbox{\sstexampleslength}{\ssttt #1}] \mbox{} \vspace{1.0ex}
\\ #2 }

\newcommand{\sstexamples}[1]{
   \item[Examples:] \mbox{} \\
   \vspace{-3.5ex}
   \begin{description}
      #1
   \end{description}
}
%  Define the format of an item.
\newcommand{\sstitem}{\item}

%  Format the attribute data type section.
\providecommand{\sstattributetype}[1]{\item[Type:]#1}


