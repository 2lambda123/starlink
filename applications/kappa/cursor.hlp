.help cursor Starlink kappa
.nf
Reports the co-ordinates of positions selected using the cursor.

Usage:

   cursor [mode] [name] [outlist] [device]

Description:

   This application reads co-ordinates from the chosen graphics device
   using a cursor and displays them on your terminal. The selected
   positions may be marked in various ways on the device (see parameter
   PLOT), and can be written to an output positions list so that subsequent
   applications can make use of them (see parameter OUTLIST). The format
   of the displayed positions may be controlled using parameter STYLE.

   Positions may be reported in several different co-ordinate Frames
   (see parameter FRAME).

   The picture or pictures within which positions are required can be
   selected in several ways (see parameters MODE and NAME).

   Restrictions can be made on the number of positions to be given (see
   parameters MAXPOS and MINPOS), and screen output can be suppressed
   (see parameter QUIET).

Parameters

For information on individual parameters, select from the list below:

CLOSE

CLOSE = _LOGICAL (Read)
   This parameter is only accessed if parameter PLOT is set to
   "Chain" or "Poly". If TRUE, polygons will be closed by joining
   the first position to the last position. [current value]

DESCRIBE

DESCRIBE = _LOGICAL (Read)
   If TRUE, a detailed description of the co-ordinate Frame in which
   subsequent positions will be reported is produced each time a
   position is reported within a new picture. [current value]

DEVICE

DEVICE = DEVICE (Read)
   The graphics workstation.  This device must support cursor
   interaction. [current graphics device]

EPOCH

EPOCH = _DOUBLE (Read)
   If a "Sky Co-ordinate System" specification is supplied (using
   parameter FRAME) for a celestial co-ordinate system, then an
   epoch value is needed to qualify it. This is the epoch at
   which the supplied sky positions were determined. It should be
   given as a decimal years value, with or without decimal places
   ("1996.8" for example). Such values are interpreted as a Besselian
   epoch if less than 1984.0 and as a Julian epoch otherwise.

FRAME

FRAME = LITERAL (Read)
   A string determining the co-ordinate Frame in which positions are
   to be reported. When a data array is displayed by an application
   such as DISPLAY, CONTOUR, etc, WCS information describing the co-ordinate
   systems known to the data array are stored with the DATA picture
   in the graphics database. This application can report positions in
   any of the co-ordinate Frames stored with each picture. The
   string supplied for FRAME can be one of the following:

   - A domain name such as SKY, AXIS, PIXEL, etc. The special domains
   AGI_WORLD and AGI_DATA are used to refer to the world and data
   co-ordinate system stored in the AGI graphics database. They can
   be useful if no WCS information was store with the picture when
   it was created.

   - An integer value giving the index of the required Frame.

   - A "Sky Co-ordinate System" (SCS) value such as EQUAT(J2000) (see
   section "Sky Co-ordinate Systems" in SUN/95).

   If a null value (!) is supplied, positions are reported in the
   co-ordinate Frame which was current when the picture was created.
   [!]

GEODESIC

GEODESIC = _LOGICAL (Read)
   This parameter is only accessed if parameter PLOT is set to
   "Chain" or "Poly". It specifies whether the curves drawn between
   positions should be straight lines, or should be geodesic curves.
   In many co-ordinate Frames geodesic curves will be simple straight
   lines. However, in others (such as the majority of celestial
   co-ordinates Frames) geodesic curves will be more complex curves
   tracing the shortest path between two positions in a non-linear
   projection. [FALSE]

INFO

INFO = _LOGICAL (Read)
   If TRUE then messages are displayed describing the use of the
   mouse prior to obtaining the first position. Note, these
   informational messages are not suppressed by setting parameter
   QUIET to TRUE. [TRUE]

LASTDIM

LASTDIM = _INTEGER (Write)
   The number of axis values written to parameter LASTPOS.

LASTPOS

LASTPOS() = _DOUBLE (Write)
   The unformatted co-ordinates of the last valid position selected
   with the cursor, in the co-ordinate Frame which was used to
   report the position. The number of axis values is written to output
   parameter LASTDIM.

LOGFILE

LOGFILE = FILENAME (Write)
   The name of the text file in which the formatted co-ordinates of
   positions selected with the cursor may be stored. This is intended
   primarily for recording the screen output, and not for communicating
   positions to subsequent applications (use parameter OUTLIST for this
   purpose). A null string (!) means that no file is created.  [!]

MARKER

MARKER = _INTEGER (Read)
   This parameter is only accessed if parameter PLOT is set to
   "Chain" or "Mark". It specifies the symbol with which each
   position should be marked, and should be given as an integer
   PGPLOT marker type. For instance, 0 gives a box, 1 gives a dot,
   2 gives a cross, 3 gives an asterisk, 7 gives a triangle. The
   value must be larger than or equal to -31. [current value]

MAXPOS

MAXPOS = _INTEGER (Read)
   The maximum number of positions which may be supplied before the
   application terminates. The number must be in the range 1 to 500.
   [500]

MINPOS

MINPOS = _INTEGER (Read)
   The minimum number of positions which may be supplied. The user
   is asked to supply more if necessary. The number must be in the
   range 0 to the value of parameter MAXPOS. [0]

MODE

MODE = LITERAL (Read)
   The method used to select the pictures in which cursor positions are
   to be reported. There are three options:

   - "Current" -- reports positions within the current picture in the
   AGI database. If a position does not lie within the current picture,
   an extrapolated position is reported, if possible.

   - "Dynamic" -- reports positions within the top-most picture
   under the cursor in the AGI  database.  Thus the second and
   subsequent cursor hits may result in the selection of a new picture.

   - "Anchor" -- lets the first cursor hit select the picture in
   which all positions are to be reported. If a subsequent cursor hit
   falls outside this picture, an extrapolated position is reported if
   possible.

   ["Dynamic"]

NAME

NAME = LITERAL (Read)
   Only pictures of this name are to be selected.  For instance, if
   you want positions in a DATA picture which is covered by a
   transparent FRAME picture, then you could specify NAME=DATA.
   A null (!) or blank string means that pictures of all names may
   be selected. NAME is ignored when MODE = "Current". [!]

NUMBER

NUMBER = _INTEGER (Write)
   The number of positions selected with the cursor (excluding
   invalid positions).

OUTLIST

OUTLIST = FILENAME (Write)
   An output positions list in which to store the valid selected
   positions (only positions in the first selected picture are
   recorded). This is the name of a text file which can be used to
   communicate positions to subsequent applications. It includes
   information describing the available co-ordinate Frames as well as
   the positions themselves. If you want a simple record of the
   positions displayed on the screen, use parameter LOGFILE instead.
   If a null value is supplied, no output positions list is produced. [!]

PLOT

PLOT = LITERAL (Read)
   The type of graphics to be used to mark the selected positions
   which have valid co-ordinates.  The appearance of these graphics
   (colour, size, etc ) is controlled by the STYLE parameter. PLOT
   can take any of the following values:

   - "None" -- No graphics are produced.

   - "Mark" -- Each position is marked by the symbol specified
   by parameter MARKER.

   - "Poly" -- Causes each position to be joined by a line to the
   previous position.  These lines may be simple straight lines or
   geodesic curves (see parameter GEODESIC). The polygons may
   optionally be closed by joining the last position to the first (see
   parameter CLOSE).

   - "Chain" -- This is a combination of "Mark" and "Poly". Each
   position is marked by a symbol and joined by a line to the previous
   position. Parameters MARKER, GEODESIC and CLOSE are used to
   specify the symbols and lines to use.

   [current value]

QUIET

QUIET = _LOGICAL (Read)
   If TRUE then positions are not reported on the screen. Output
   parameters and files are still created. The display of informational
   messages describing the use of the cursor is controlled by the
   parameter INFO. [FALSE]

STYLE

STYLE = LITERAL (Read)
   A group of attribute settings describing the plotting style to use
   when drawing the graphics specified by parameter PLOT. The format
   of the positions reported on the screen may also be controlled.

   A comma-separated list of strings should be given in which each
   string is either an attribute setting, or the name of a text file
   preceded by an up-arrow character "^". Such text files should
   contain further comma-separated lists which will be read and
   interpreted in the same manner. Attribute settings are applied in
   the order in which they occur within the list, with later settings
   over-riding any earlier settings given for the same attribute.

   Each individual attribute setting should be of the form:

      <name>=<value>

   where <name> is the name of a plotting attribute, and <value> is
   the value to assign to the attribute. Default values will be
   used for any unspecified attributes. All attributes will be
   defaulted if a null value (!) is supplied. See section "Plotting
   Attributes" in SUN/95 for a description of the available
   attributes. Any unrecognised attributes are ignored (no error is
   reported). [current value]

   In addition to the attributes which control the appearance of
   the graphics (Colour, Font, etc), the following attributes may
   be set in order to control the appearance of the formatted axis
   values reported on the screen: Format, Digits, Symbol, Unit. These
   may be suffixed with an axis number (eg "Digits(2)") to refer to
   the values displayed for a specific axis. [current value]

Examples

cursor frame=pixel
   This obtains co-ordinates within any visible picture for the
   current graphics device by use of the cursor. Positions are
   reported in pixel co-ordinates if available, and in the current
   co-ordinate Frame of the picture otherwise.

cursor frame=equat(J2010)
   This obtains co-ordinates within any visible picture for the
   current graphics device by use of the cursor. Positions are
   reported in equatorial RA/DEC co-ordinates (referenced to the
   J2010 equinox) if available, and in the current co-ordinate Frame
   of the picture otherwise.

cursor describe plot=mark marker=3 style="colour=red,size=2"
   As above except, positions are always reported in the current
   co-ordinate Frame of each picture. The details of these co-ordinate
   Frames are described as they are used. Each selected point is
   marked with PGPLOT marker 3 (an asterisk). The markers are
   red and are twice the default size.

cursor current maxpos=2 minpos=2 plot=poly quiet outlist=slice
   Exactly two positions are obtained within the current picture,
   and are joined with a straight line. The positions are written to
   a text file called slice but are not displayed on the screen. The
   text file may be used to communicate the positions to later
   applications.

cursor name=data style="^mystyle,digits(1)=5,digits(2)=7"
   This obtains co-ordinates within any visible DATA picture on
   the current graphics device.  The style to use is read from
   text file mystyle, but is then modified so that 5 digits are used
   to format axis 1 values, and 7 to format axis 2 values.

Notes

-  The unformatted values stored in the output parameter LASTPOS,
may not be in the same units as the formatted values shown on
the screen and logged to the log file. For instance, unformatted
celestial co-ordinate values are stored in radians.

-  The current picture is unchanged by this application.

-  In DYNAMIC and ANCHOR modes, if the cursor is situated at a
position where there are no pictures of the selected name, the
co-ordinates in the BASE picture are reported.

-  Positions can be removed (the instructions state how), starting
from the most-recent one.  Such positions are excluded from the
output positions list and log file (if applicable). If graphics
are being used to mark the positions, then removed positions will
be highlighted by drawing a marker of type 8 (a circle containing a
cross) over the removed positions in a different colour.

Related_Applications

   KAPPA: LISTSHOW, LISTMAKE, INSPECT, PICCUR; Figaro: ICUR, IGCUR.

Authors

JM: Jo Murray  (STARLINK)

MJC: Malcolm J. Currie  (STARLINK)

DSB: David S. Berry (STARLINK)

History

 22-MAY-1989 (JM):
    Original version.

 1989 Jun 28 (MJC):
    Added error checking, some tidying, fixed several bugs, only
    reports the picture name and comment when it changes.

 1989 Jul 10 (MJC):
    Fixed "SGS zone too small" bug by reordering the code so that
    the MODE is obtained before the device; extended the prologue.

 1989 Oct 19 (MJC):
    Fixed the synchronisation for terminals, and added commentary
    for both terminals and image displays.

 1989 Oct 24 (MJC):
    Added the log file and name options, and redesigned the
    description.

 1989 Nov 10 (MJC):
    Calls a subroutine to prepare the cursor.

 1990 Jan 9 (MJC):
    Corrected SGS status.

 1990 Apr 20:
    Added output of the current picture's label, if it exists.

 1991 February 8 (MJC):
    Added AGI context control, and tidied unwanted picture
    identifiers.

 1991 March 19 (MJC):
    Converted to SST prologue.

 1991 April 9 (MJC):
    Added AGI begin-and-end block.  Obtains data co-ordinates if
    present.

 1991 May 14 (MJC):
    Added COSYS parameter.

 1992 January 29 (MJC):
    Fixed bug in list of options for MODE.

 1992 February 19 (MJC):
    AGI behaviour has changed, so call new AGI routine to test
    whether or not the picture has changed between cursor
    selections.

 1992 March 3 (MJC):
    Replaced AIF parameter-system calls by the extended PAR
    library.

 1993 May 24 (MJC):
    Added XC and YC output parameters.

 1995 August 24 (MJC):
    Added the COLOUR and PLOT parameters and example of their use.
    No longer selects a new current picture (use PICCUR instead).
    Made usage and examples lowercase.  Added Related Applications.

 1995 December 16 (MJC):
    Added NUMBER, XP, and YP output parameters.  Allowed erasure
    of previous position.

 1996 May 31 (MJC):
    Improved and simplified the graphics, so the marker has a
    uniform size, and plotting can occur outside the current
    SGS picture in ANCHOR and CURRENT modes.

 1997 March 11 (MJC):
    Fixed initialisation bug for parameter NUMBER, and hence XP and
    YP.  Fixed bug where SGS pen was being set when PLOT="None".

 28-AUG-1998 (DSB):
    Radical changes to use PGPLOT and AST for graphics and
    co-ordinate handling.
.endhelp
