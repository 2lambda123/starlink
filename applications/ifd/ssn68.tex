\documentclass[twoside,11pt]{starlink}

% ? Specify used packages
% ? End of specify used packages



% -----------------------------------------------------------------------------
% ? Document identification
% Fixed part
\stardoccategory    {Starlink System Note}
\stardocinitials    {SSN}
\stardocsource      {sun\stardocnumber}

% Variable part
\stardocnumber      {68.3}
\stardocauthors     {A J Chipperfield}
\stardocdate        {17 December 1997}
\stardoctitle     {IFD\\[1ex]
                                Interface Definition Files}
\stardocversion     {1.2}
\stardocabstract  {Interface Definition Files (IFDs) provide a
generic method of defining the interface between Starlink
(\xref{ADAM}{sg4}{}) applications
and various software environments.  Software is described which enables
developers to create IFDs and use them to create files required by the
Starlink or
\htmladdnormallink{IRAF}{\IRAFURL} environments.}
% ? End of document identification
% -----------------------------------------------------------------------------
% ? Document specific \providecommand or \newenvironment commands.
\providecommand{\IRAFURL}{http://www.starlink.ac.uk/iraf/web/iraf-homepage.html}
\providecommand{\TCLURL}{http://sunscript.sun.com/tcltext.html}
\providecommand{\dash}{--}
\providecommand{\tab}{\>}

% Reset \{ to and \} tt font for LaTeX
\providecommand{\setlbrace}{\renewcommand{\{}{\texttt{\symbol{123}}}}
\providecommand{\setrbrace}{\renewcommand{\}}{\texttt{\symbol{125}}}}
\latex{\setlbrace\setrbrace}

%  Format the Effects section.
\providecommand{\ssteffects}[1]{
  \item[Effects:] \mbox{} \\
  \vspace{-5ex}
  \begin{description}
     #1
  \end{description}
}

%  SSN/68 special Define the format of a subsection in the examples section.
% Since this differs from the standard SST scheme we give it a new name
\providecommand{\ssttabbedexamplesubsection}[2]
{   \vspace{0ex}
\begin{quote} \texttt{\begin{tabbing}
xxx\=xxx\=\kill
#1
\end{tabbing}}
\end{quote}
#2}

\newcommand{\sstargsnone}[0]{\item[{\rm None}]}

% ? End of document specific commands
% -----------------------------------------------------------------------------
%  Title Page.
%  ===========
\begin{document}
\scfrontmatter

% ? Main text

\section{\xlabel{introduction}Introduction}
The
\xref{Starlink Software Environment (ADAM)}{sg4}{}
requires that application packages
to be run in it have an associated Interface File (\texttt{.ifl}) which defines
the parameters of the various applications, and package definition files
which define the commands available and the source of help \textit{etc.}

Other environments such as
\htmladdnormallink{IRAF}{\IRAFURL} require very similar information presented
in a different way.

A file format known as the Interface Definition Format (IFD) has been developed
so that a single file can be the source of all the different files required
to form the interface between Starlink packages and the software environment
in which they are to be run.

This document describes the Interface Definition Format and the software to
process IFD files into the required environment-specific files. Currently
only ADAM and IRAF are handled.  A utility to assist in the production of an
IFD file given an ADAM Interface File is also described.

\section{\xlabel{interface_definition_files}Interface Definition Files}
\subsection{\xlabel{the_basic_ifd}The Basic IFD}
Suppose a Starlink application package, PKG, contains two monoliths,
pkg\_exe1, containing actions act1 and act2, and pkg\_exe2, containing actions
act3 and act4. The IFD would have the basic form:
\begin{terminalv}
    package pkg {
    #  Comments
       executable pkg_exe1 {
          action act1 {
             parameter act1par1 {
               ...
             }
             parameter act1par2 {
               ...
             }
             ...
          }
          action act2 {
             parameter act2par1 {
               ...
             }
             ...
          }
          ...
       }
       executable pkg_exe2 {
          action act3 {
             parameter act3par1 {
               ...
             }
             ...
          }
          action act4 {
             parameter act4par1 {
               ...
             }
             ...
          }
       }
    }
\end{terminalv}
where `\texttt{...}' represents omitted lines.

This is interpreted by
\htmladdnormallink{Tcl}{\TCLURL}
with the keywords `\texttt{package}', `\texttt{executable}', `\texttt{action}',
\textit{etc.}\ treated as procedures which are defined appropriately depending
upon the software environment for which files are being produced.
There are currently three scripts which make these definitions and produce
environment-specific files:
\begin{description}
\item[\htmlref{\texttt{ifd2star}}{ifd2star}] Produces files required by the
Starlink environment.
\item[\htmlref{\texttt{ifd2iraf}}{ifd2iraf}] Produces files required by the
IRAF environment.
\item[\htmlref{\texttt{ifd2irafifl}}{ifd2irafifl}] Produces Starlink interface
files for use when running Starlink applications from IRAF.
\end{description}

The following points should be noted:
\begin{itemize}
\item Keywords must be in lower case.
\item Comments may be included \dash\ if \texttt{\#} is found where a command
(keyword) is expected, the remainder of the line is treated as comment.
\item Lists of values, such as the
\htmlref{\texttt{vpath}}{vpath} specifier are space-separated (not
comma-separated as in ADAM Interface Files).
\item String values containing space or \texttt{\$} must be quoted (with
\{\}).
Other Tcl special characters will also need to be quoted or escaped.
\end{itemize}

A `full' IFD will normally contain additional keywords to define absolutely
everything required in producing the environment-specific files.

\subsection{\xlabel{conditional_sections}\label{conditional_sections}Conditional
Sections}
The IFD may contain sections to be included or excluded depending upon the
environment for which it is being processed.
\begin{quote} \texttt{\textit{environment}: \{ \textit{code} \}\\
\textit{environment}! \{ \textit{code} \}
} \end{quote}
The separator `\texttt{:}' causes the code to be processed, and `\texttt{!}'
causes the code to be ignored only if the environment is
\texttt{\textit{environment}}.
In both cases, \texttt{\textit{environment}} can be a comma-separated list of
environment names and the code may consist of multiple lines.

The term `environment' is used loosely here \dash\ the environment is set to:
\begin{description}
\item[\texttt{star}] when \htmlref{\texttt{ifd2star}}{ifd2star} is running.
\item[\texttt{iraf}] when \htmlref{\texttt{ifd2iraf}}{ifd2iraf} is running.
\item[\texttt{irafifl}] when \htmlref{\texttt{ifd2irafifl}}{ifd2irafifl} is
running.
\end{description}

For example with,
\begin{quote} \texttt{star: \{ \textit{code} \}
} \end{quote}
\texttt{\textit{code}} will only be processed by \texttt{ifd2star}, and with
\begin{quote} \texttt{star,iraf! \{ \textit{code} \}
} \end{quote}
\texttt{\textit{code}} will not be processed by either \texttt{ifd2star} or
\texttt{ifd2iraf}.

\subsection{\xlabel{creating_ifds_from_interface_files}Creating IFDs from
Interface files}
For existing packages a basic IFD can be produced by running the
\texttt{ifl2ifd} script on the \texttt{.ifl} file(s) of the package.
\begin{terminalv}
% ifl2ifd kappa_mon
\end{terminalv}
Will produce IFD \texttt{kappa\_mon.ifd} from interface file
\texttt{kappa\_mon.ifl}.

Where the package consists of several monoliths, the resulting IFDs must be
combined to produce a single IFD.

This basic IFD will define all the package applications which are in the
monoliths. However:
\begin{enumerate}
\item Some action definitions may not be required for all environments
\dash\ the
\htmlref{conditional inclusion}{conditional_sections}
syntax
\latex{(see Section \ref{conditional_sections})} should be used for these.
\item Any
\htmlref{aliases}{alias}
for the command names should be inserted. This includes the abbreviations
allowed in
\xref{ICL}{sg5}{} \dash\ IRAF has its own system for command abbreviation which
does not require any additions to the IFD.
\item Some parameter definitions may need tweaking. In particular:
\begin{itemize}
\item Vector or array parameters which have not been recognised as such
(because there was no vector or array static default specified in the
interface file) must have a
\htmlref{\texttt{size}}{size}
definition added.
\item Static defaults should only be specified if they are genuine default
values. Some packages do not use the DEFAULT value in the ADAM environment
but it is usually used in IRAF and so bad values can cause problems which
were not apparent in ADAM. In other cases, no default value has been
specified (probably because a GLOBAL value was expected to be used) whereas
a default value would be useful for IRAF.
\end{itemize}
\item Commands which form part of the package but are not just simple
invocations of the applications must be defined.
\item Any
Comments
or
\htmlref{displays}{display}
required in the package definition files must be defined.
\end{enumerate}
More information on the changes required for IRAF is given in
\xref{SSN/35}{ssn35}{}.

\section{\label{ifd2star}\xlabel{producing_starlink_environment_files_from_an_ifd}Producing
Starlink Environment Files from an IFD}
The \textbf{Tcl} script \texttt{ifd2star} is used to produce the Starlink
environment files for the package.
\begin{quote}
\texttt{ifd2star \textit{package}}
\end{quote}
will process IFD \texttt{\textit{package}.ifd} and produce the following files
required by the Starlink (ADAM) environment:
\begin{description}
\item[Interface Files] Describing the parameters for the ADAM programs.
These files are described in detail in
\xref{SUN/115}{sun115}{}.
Where applications are combined into monolithic executable files, individual
interface files are produced for each application in addition to a monolithic
interface file.
\item[The \xref{ICL}{sg5}{} Package Definition File] Defining the ICL commands
associated with the package and known as the package \texttt{.icl} file.
These files are described in detail in
\xref{SSN/64}{ssn64}{}.
\item[Shell Package Definition File] Defining the commands associated with
running the package direct from the shell. This file is written in two
syntaxes, the package \texttt{.csh} file for csh-type shells, and a
\texttt{.sh} file for sh-type shells.
These files are described in detail in
\xref{SSN/64}{ssn64}{}.
\end{description}

\section{\label{ifd2iraf}\xlabel{producing_iraf_files_from_an_ifd}Producing
IRAF Files from an IFD}
The \textbf{Tcl} scripts \texttt{ifd2iraf} and \texttt{ifd\_irafhlpgen} are
used to produce the files required by IRAF.
More details on the files produced may be found in
\xref{SSN/35}{ssn35}{}
and the IRAF documentation.
\begin{quote}
\texttt{ifd2iraf \textit{package}}
\end{quote}
will process IFD \texttt{\textit{package}.ifd} and produce the following files:
\begin{itemize}
\item An
\xref{IRAF parameter file}{ssn35}{task_parameter_files},
\texttt{\textit{application}.par}, for each application in the package.
These define the IRAF parameters associated with the application.
There will be a one-to-one correspondence between the IRAF parameters and the
ADAM parameters although they may be handled differently in the two
environments.
\item An
\xref{IRAF package definition file}{ssn35}{package_definition_files},
\texttt{\textit{package}.cl}. This defines the IRAF commands to run
the applications in the package.
The name \texttt{\textit{package}} is derived from the argument of the
\htmlref{\texttt{package}}{package}
procedure call in the \texttt{.ifd} file.
\item An
\xref{IRAF package parameter file}{ssn35}{package_parameter_files},
\texttt{\textit{package}.par}.
This defines parameters for the package - in particular, the version number.
\item An
\xref{Output Parameter File}{ssn35}{the_output_parameters_file},
\texttt{\textit{executable}.tcl} for each executable in the package.
Each one lists the
\xref{`output'}{ssn35}{output_parameters}
and
\xref{`dynamic'}{ssn35}{dynamic_parameters}
parameters for each action in the executable.
This information is required by the IRAF/Starlink inter-operability system
rather than IRAF itself.
\end{itemize}
and:
\begin{quote}
\texttt{ifd\_irafhlpgen \textit{package}}
\end{quote}
will read the Starlink HLP source file \texttt{\textit{package}.hlp} and
produce a set of
\xref{IRAF help files}{ssn35}{help_files}
for the package but it is likely that changes to the text will be required.

\section{\label{ifd2irafifl}\xlabel{producing_irafspecific_interface_files_from_an_ifd}Producing
IRAF-specific Interface Files from an IFD}
It may sometimes be found that the interface file required when running a
Starlink application from IRAF is different from that required normally.
\htmlref{Conditional statements}{conditional_sections}\latex{ (see Section
\ref{conditional_sections})} for the `\texttt{irafifl}' environment may be
included in the IFD and the \textbf{Tcl} script \texttt{ifd2irafifl} used to
create the special interface files (no other files are produced).

For example, with the IFD:
\begin{terminalv}
package pkg {
  irafifl! { executable pkg_exe1 {
   ...
   }
   executable pkg_exe2 {
      action act1 {
         parameter act1par1 {
            type _REAL
            vpath prompt
          irafifl! {ppath CURRENT DYNAMIC DEFAULT}
          irafifl: {ppath DYNAMIC DEFAULT}
            ...
         }
         ...
      }
      ...
   }
}
\end{terminalv}
The command:
\begin{quote}
\texttt{\% ifd2irafifl \textit{package}}
\end{quote}
will produce an interface file for \texttt{pkg\_exe2} only, with a
\texttt{ppath} of `\texttt{DYNAMIC,DEFAULT}' for parameter \texttt{act1par} of
action \texttt{act1}.

\section{\xlabel{the_full_ifd_file}\label{IFD_file}The `Full' IFD File}
The basic keywords in an IFD have already been described but in order to
produce complete versions of the required environment files automatically,
additional syntax and keywords are available.
This section outlines what is available; see elsewhere
\latex{(Section \ref{keywords}) } for
\htmlref{complete descriptions}{keywords} of all the keywords.

\subsection{\xlabel{ifd_initial_keywords}IFD Initial Keywords}
The following are examples of the additional keywords which may appear within
the package description (\textit{i.e.}\ after \texttt{package \textit{name}
\{}).
They are all optional and will be ignored for environments for which they are
not relevant.
\begin{small}
\begin{terminalv}
version 1.0              # Specifies a package version number

exepath {$PKGNAME_DIR}   # specifies the directory containing executable
                         # images etc. - default $PKGNAME_DIR

helplib {$PKGNAME_HELP}  # specifies the help library - default
                         # $PKGNAME_HELP
                         # Will be effective until another helplib

prefix pkg               # specifies a prefix for automatic aliases E.g
                         # 'prefix kap' would result in kap_add etc
                         # being defined in addition to add.

display {
Message to display whilst .csh, .sh, .icl scripts for example are running
It will usually be the welcome message for the package.
A display may contain any number of lines which will be displayed line
for line. There may be more that one display in an IFD.
}

defhelp topic entry [library]  # Help on topic may be found in library
                               # (default Current(helplib)) section
                               # defined by entry
\end{terminalv}
\end{small}
\subsection{\xlabel{additional_action_keywords}\label{add_act}Additional
Action Keywords}
The following are examples of the additional keywords which may appear within
the action description (\textit{i.e.}\ after \texttt{action \textit{name} \{}).
They are all optional and will be ignored for environments for which they are
not relevant.
\begin{terminalv}
alias {acto(ne) act1 act_1} # possible aliases

helplib {$EXAMPLE1_HELP}    # New helplib if required.
\end{terminalv}

\subsection{\xlabel{parameter_definition_keywords}Parameter Definition Keywords}
\subsubsection{\xlabel{general}General}
Within the parameter description
(\textit{i.e.}\ after \texttt{parameter \textit{name} \{}), The following
keywords may appear (example arguments are given):
\begin{terminalv}
access READ
association <->GLOBAL.COORD_SYSTEM
default {two words}
dynamic yes
help {\%$KAPPA_HELP ADD PARAMETERS IN1}
helpkey *
in Data World
outputpar
position 1
ppath GLOBAL DYNAMIC
prompt {Co-ordinate system used in the ARD file}
range 1 10
repeated
size *
type _REAL
vpath GLOBAL DEFAULT
\end{terminalv}
They are all optional and will be ignored for environments for which they are
not relevant. There is an obvious correspondence between most of these
keywords and the parameter definition fields of an ADAM interface file as
described in
\xref{SUN/115}{sun115}{}
which should be consulted for the finer details of permitted values but
remember that lists, such the ppath value, are space-separated in the IFD but
comma-separated in the Interface File, and character constants only need to be
quoted in the IFD (with \{\}) if they contain spaces or \texttt{\$}.

The keywords which do not have a corresponding ADAM Interface File field
are
\htmlref{\texttt{dynamic}}{dynamic_key},
\htmlref{\texttt{outputpar}}{outputpar_key},
\htmlref{\texttt{repeated}}{repeated_key}
and
\htmlref{\texttt{size}}{size_key}\latex{ (see the following sections)}.

\subsubsection{\xlabel{the_dynamic_keyword}\label{dynamic_key}The
\texttt{dynamic} keyword}
This keyword forces the parameter to be classed as `dynamic' or `non-dynamic'
regardless of the normal default.

A dynamic parameter is one whose value cannot
easily be set as a static default or calculated by the user at runtime.
The Starlink Software Environment allows such values to be set by means of
VPATH GLOBAL or VPATH DYNAMIC but this is not available for other environments
so they must be handled as special cases. In the case of IRAF, for instance,
dynamic parameters are handled by forcing the ADAM task to issue a parameter
request message with a suggested value. This message is intercepted by the
\xref{IRAF/Starlink adaptor process}{ssn35}{the_adaptor_process}
which returns the suggested value without asking IRAF for a value.
For more information on this, see
\xref{SSN/35}{ssn35}{dynamic_parameters}.

In the absence of a
\htmlref{\texttt{dynamic}}{dynamic}
keyword, all parameters with VPATH starting with GLOBAL are classed as
dynamic and all others (including VPATH DYNAMIC) as non-dynamic.

So that users are warned, particularly when using IRAF \texttt{epar}, that
changing the parameter is likely to have an unexpected effect, the prompt
string has \texttt{*!} prepended to it.

\subsubsection{\xlabel{the_outputpar_keyword}\label{outputpar_key}The
\texttt{outputpar} keyword}
For non-primitive parameter types, there is a potential confusion between the
access required to the parameter and the access required to the file
or device whose name is given by the parameter. ADAM requires to be
told the access to the file or device and IRAF (more accurately the
IRAF/Starlink inter-operability system) needs to know if the value of
the parameter itself is output and thus that the IRAF parameter must
be updated after the application has run.
The list of parameters which must be updated is read from the Output Parameter
File created by \texttt{ifd2iraf}.

The system will assume that primitive types need updating if the access
mode (as defined by the
\htmlref{\texttt{access}}{access}
keyword) is `WRITE' or `UPDATE' and that other types are not output.
For this reason, the
\htmlref{\texttt{outputpar}}{outputpar}
keyword is provided to force a non-primitive parameter to be output if
necessary.

\subsubsection{\xlabel{the_repeated_keyword}\label{repeated_key}The
\texttt{repeated} keyword}
This keyword is used to indicate that new values for the parameter may
required repeatedly during one invocation of the program.
This will usually mean that the user must be prompted each time. In IRAF the
recommended default `automatic' mode allows prompting to be overridden and the
same value supplied each time a value is requested so `query' mode must be set
for `repeated' parameters.

\subsubsection{\xlabel{the_size_keyword}\label{size_key}The \texttt{size}
keyword}
ADAM does not require to know the size of a parameter, or even whether it is
a scalar, vector or array.  However, this information is required for some
parameter systems so the
\htmlref{\texttt{size}}{size}
keyword is provided in the IFD format.

The IRAF/Starlink inter-operability system only needs to know that the
parameter is non-scalar so currently the argument is ignored and may be given
as \texttt{*}.

\subsection{\xlabel{the_command_keywords}The \texttt{command} Keywords}
A keyword
\htmlref{\texttt{command}}{command}
is provided to define commands for the command language in use (ICL, CL
\textit{etc.}) which will do various generic things as follows:
\begin{itemize}
\item Define a command which will display a message to the user.
\begin{terminalv}
  command task1 {
    print {task1 has been renamed to task2}
  }
\end{terminalv}

\item Define a command which will obey a command in the underlying shell.
\begin{terminalv}
  command cleanup {
    obey {rm *.tmp}
  }
\end{terminalv}

\item Define a command to run an action with set parameters
\begin{terminalv}
  command fitsexist {
    task fitsmod { taskinherit ndf
                   taskinherit keyword
                   taskparam edit=exist
                   taskparam mode=interface
             }
  }
\end{terminalv}
The \texttt{taskinherit} subcommand gives the names of parameters of the
command whose values will be inherited by the action named in the
\texttt{task} subcommand.
The \texttt{taskparam} subcommand gives the name and fixed value of the other
parameters to be passed to the action.
The code above will result in command \texttt{fitsexist} being defined with
two parameters, \texttt{ndf} and \texttt{keyword} so that obeying
\begin{terminalv}
fitsexist comwest simple
\end{terminalv}
is equivalent to obeying \texttt{fitsmod} with:
parameter \texttt{ndf} set to \texttt{comwest};
parameter \texttt{keyword} set to \texttt{simple};
parameter \texttt{edit} set to \texttt{exist}
and
parameter \texttt{mode} set to \texttt{interface}.

Note that in Starlink mode, the csh, sh and ICL user-interfaces will just
append anything following the \texttt{fitsexist} command to the
\texttt{fitsmod} command, following the fixed parameters. The
\texttt{taskinherit} keyword has no effect.
\item Define an obsolete command \dash\ if it is obeyed, the message is
displayed.
\begin{terminalv}
  command oldcommand {
    obsolete {Command oldcommand is obsolete - use newcommand}
  }
\end{terminalv}
\end{itemize}

Note that in addition to the subcommand \texttt{print}, \texttt{obey}
\textit{etc.} the command definition may contain \texttt{alias}
specifications.

\subsection{\xlabel{filespecific_output}File-specific Output}
Sometimes output is required only for one particular file. The following
keywords allow lines to be put, verbatim, into the appropriate file.
They are ignored if that file is not being produced.

For example:

\begin{terminalv}
# Output to the package.icl file.
  icl {
\{ This is an ICL comment - NOTE that the brace must be escaped
load file
  }

# Output to the package.csh file.
  csh {
# Define an alias in the .csh file
   alias command shell_command
  }

# Output to the package.sh file.
  sh {
# Define a shell function in the .sh file.
# (the exotic reference to the positional arguments is a portable
# version of plain "$@")
   command () { shell_command ${1+"$@"}; }
  }

# Output to the package.cl file.
  cl {
# Set an IRAF environment variable for the package
set FIGARO_AXES=true
  }
\end{terminalv}

\newpage
\section{\xlabel{details_of_ifd_file_keywords}\label{keywords}Details of IFD
File Keywords}

\sstroutine{
   access
}{
   define the access needed to the parameter.
}{
   \sstdescription{
      The access may be READ, WRITE or UPDATE (see
      \xref{SUN/115}{sun115}{}
      for details).
   }
   \sstinvocation{
      access \textit{mode}
   }
   \sstarguments{
      \sstsubsection{
         \textit{mode}
      }{
         The required access mode.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         access READ
      }{
         Specifies READ access for the parameter.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}
         {The appropriate \texttt{access} field is written to the Interface
          Files.}
      \sstsubsection{IRAF:}
         {For file type parameters there is currently no action. For other
          types the parameter is listed in the Output Parameter File if the
          access mode is WRITE or UPDATE.}
   }
}

\sstroutine{
   action
}{
   Declare an action within an executable
}{
   \sstdescription{
      Declares the name of an action (application) within an executable
      image and defines the action.
   }
   \sstinvocation{
      action \textit{actionname} \{ \textit{definition} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{actionname}
      }{
         The name of the action.
      }
      \sstsubsection{
         \textit{definition}
      }{
         A Tcl script defining the action in terms of the Tcl procedures
         declared for an action.
      }
   }
   \sstdiytopic{Subcommands}{
      The following keywords are defined within an \texttt{action} definition:
      \htmlref{\texttt{alias}}{alias},
      \htmlref{\texttt{parameter}}{parameter}.
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         action add \{\\
         \tab parameter in \{\\
         \tab \tab \dots\\
         \tab \}\\
         \}
      }{
         Defines the action \texttt{add} with parameter \texttt{in}.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{Opens the individual \texttt{.ifl}.}
      \sstsubsection{IRAF:}{Opens the \texttt{.par} file.}
   }
}

\sstroutine{
   alias
}{
   Define command aliases for the action
}{
   \sstdescription{
      By default a command with the same name as the action will be defined to
      invoke each action and, if a
      \htmlref{\texttt{prefix}}{prefix}
      is defined, a command name with the given prefix will also be defined.

      The \texttt{alias} command allows a list of additional command names to be
      defined to invoke the action.  The list of aliases may be a list
      of simple command names or names of the form:

        com(mand)

      where the part before the parentheses is the minimum abbreviation.
      (Currently this only applies for ICL.)

      If a prefix is defined, prefixed command names will also be defined
      for all aliases.
   }
   \sstinvocation{
      alias \{ \textit{alias\_list} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{alias\_list}
      }{
         A list of additional command names.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         alias \{ acto(ne) act1 \}
      }{
         Defines \texttt{acto}, \texttt{acton} and  \texttt{act1} as
         aliases for \texttt{actone}.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{As defined.}
      \sstsubsection{IRAF:}{None.}
   }
}

\sstroutine{
   association
}{
   Specify an associated GLOBAL parameter
}{
   \sstdescription{
      This corresponds with the ADAM ASSOCIATION field (see
      \xref{SUN/115}{sun115}{}
      for details).
   }
   \sstinvocation{
      association \textit{specification}
   }
   \sstarguments{
      \sstsubsection{
         \textit{specification}
      }{
         specifies the name of the associated GLOBAL parameter and the
         allowed access to it.
      }

   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         association <->GLOBAL.DEVICE
      }{
         GLOBAL.DEVICE may be used as a source for the value or suggested
         value of the current parameter, and will be updated with the
         current value of the parameter if the application ends successfully.
      }
      \ssttabbedexamplesubsection{
         association <-GLOBAL.DEVICE
      }{
         GLOBAL.DEVICE may be used as a source for the value or suggested
         value of the current parameter but will not be updated with the
         current value of the parameter.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}
         {The appropriate \texttt{association} field is written to the
          Interface Files.}
      \sstsubsection{IRAF:}{None.}
   }
}

\sstroutine{
   cl
}{
   Lines for output to the package \texttt{.cl} file
}{
   \sstdescription{
      Specifies lines of text to be output to the package \texttt{.cl} file.
   }
   \sstinvocation{
      cl \{ \textit{text} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{text}
      }{
         The specified text is written to the package \texttt{.cl} file.
         It may consist of more than one line. The text should be legal
         IRAF command language.
      }

   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         cl \{ \# Set an IRAF environment variable\\
         \tab set FIGARO\_AXES=true \}
      }{
         Inserts a comment and a set command into the package \texttt{.cl}
         file.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{None.}
      \sstsubsection{IRAF:}{As defined.}
   }
}

\sstroutine{
   command
}{
   Define a command
}{
   \sstdescription{
      This command defines package commands other than those to run
      applications in the standard way. The command definition may contain
      an \texttt{alias} subcommand and must contain one of the other subcommands
      listed below.
   }
   \sstinvocation{
      command \textit{name} \{ \textit{definition} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{name}
      }{
         The name of the command.
      }
      \sstsubsection{
         \textit{definition}
      }{
         A Tcl script defining the command in terms of the Tcl procedures
         declared for a command.
      }
   }
   \sstdiytopic{Subcommands}{
      The following keywords are defined within a \texttt{command} definition:\\
      \htmlref{\texttt{alias}}{alias} \dash\ define aliases for the new
      command\\
      \htmlref{\texttt{print}}{print} \dash\ print a message\\
      \htmlref{\texttt{obey}}{obey} \dash\ obey a shell command\\
      \htmlref{\texttt{task}}{task} \dash\ run an action with given parameters\\
      \htmlref{\texttt{obsolete}}{obsolete} \dash\ define an obsolete command.
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         command  abc \{\\
         \tab alias def \\
         \tab task xyz \{ taskparam par=3.0 \}\\
         \}
      }{
         Defines command \texttt{abc} to run command \texttt{xyz} with parameter
         \texttt{par} set to 3.0. \texttt{def} is an alias for \texttt{abc}.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{As specified.}
      \sstsubsection{IRAF:}{As specified.}
   }
}

\sstroutine{
   csh
}{
   Lines for output to the \texttt{.csh} file
}{
   \sstdescription{
      Specifies lines of text to be output to the \texttt{.csh} file.
   }
   \sstinvocation{
      csh \{ \textit{text} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{text}
      }{
         The specified text is written to the \texttt{.csh} file. It may consist
         of more than one line. The text should be legal C-shell command
         language.
      }

   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         csh \{ \# Define the help library\\
         \tab setenv KAPPA\_HELP INSTALL\_HELP/kappa \}
      }{
         Inserts a comment and a setenv command into the \texttt{.csh} file.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{As defined.}
      \sstsubsection{IRAF:}{None.}
   }
}

\sstroutine{
   default
}{
   Define the default value for a parameter
}{
   \sstdescription{
      Defines the default value for a parameter and must be of an appropriate
      type (see
      \xref{SUN/115}{sun115}{}
      for details).
   }
   \sstinvocation{
      default \textit{value}
   }
   \sstarguments{
      \sstsubsection{
         \textit{value}
      }{
         The default value for the parameter. It can be an array, in which case
         the elements should be space-separated.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         default y
      }{
         Specifies TRUE as the default for a LOGICAL parameter.
      }
      \ssttabbedexamplesubsection{
         default 1.0 10.0
      }{
         Specifies vector [1.0,10.0] as the default.
      }
      \ssttabbedexamplesubsection{
         default \{a b\}
      }{
         Specifies the string \texttt{"a b"} as the default.
      }
      \ssttabbedexamplesubsection{
         default a b
      }{
         Specifies the array \texttt{["a", "b"]} as the default.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{As specified \dash\ output to the \texttt{.ifl}
                            files.}
      \sstsubsection{IRAF:}{The value is used as the initial default value in
                            the \texttt{.par} file. For primitive data types,
                            a default of \texttt{!} is changed to
                            \texttt{INDEF}.}
   }
}

\sstroutine{
   defhelp
}{
   Define a help topic
}{
   \sstdescription{
      The defhelp procedure specifies the location of help information on
      a topic assuming a hierarchical help system such as
\xref{Starlink HLP}{sun124}{}
      and the currently defined help library (see
\htmlref{\texttt{helplib}}{helplib}).
      Currently \texttt{defhelp} is only used in defining help when running
      from ICL.
      The location of help on the applications is defined automatically
      \dash\ it is only necessary to include \texttt{defhelp} keywords in the
      IFD for other topics.
   }
   \sstinvocation{
      defhelp \textit{topic} \textit{location}
   }
   \sstarguments{
      \sstsubsection{
         \textit{topic}
      }{
         The topic name.
      }
      \sstsubsection{
         \textit{location}
      }
         The location within the currently defined help library at which help
         on the specified topic will be found.
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         defhelp data\_structures data\_structures
      }{
         Help on  `data\_structures' is found in subtopic
         `data\_structures' of the current help library.
      }
      \ssttabbedexamplesubsection{
         defhelp kappa 0
      }{
         Help on `kappa' is found in the top level of the current help library.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{As specified.}
      \sstsubsection{IRAF:}{None.}
   }
}

\sstroutine{
   display
}{
   Define a display message
}{
   \sstdescription{
      Defines a message to display whilst \texttt{.csh} or \texttt{.icl}
      scripts, for example, are running.
      It will usually be the welcome message for the package.
      A display may contain any number of lines which will be displayed line
      for line. There may be more that one display in an IFD.
   }
   \sstinvocation{
      display \{ \textit{message} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{message}
      }{
         The message to be displayed. It may consist of more than one line.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         display \{\\
   Welcome to the package\\
   \hspace*{2cm}Version 1.1-1\\
   \}
      }{
       The message will be displayed, as aligned, when the package is
       initialised from ICL or the Unix shell.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{As specified.}
      \sstsubsection{IRAF:}{None.}
   }
}

\sstroutine{
   dynamic
}{
   Define a parameter to be `dynamic'
}{
   \sstdescription{
      Forces the parameter to be classed as dynamic or non-dynamic regardless
      of other considerations. For more information, see
\htmlref{`The \texttt{dynamic} Keyword'}{dynamic_key}\latex{ (Section \ref{dynamic_key})}.
   }
   \sstinvocation{
      dynamic \textit{switch}
   }
   \sstarguments{
      \sstsubsection{
         \textit{switch}
      }{
         yes, y, true or t to make the parameter dynamic.\\
         no, n, false or f to make the parameter non-dynamic.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
       dynamic yes
      }{
       Forces the parameter to be classed as dynamic.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{None.}
      \sstsubsection{IRAF:}{If the parameter is made dynamic, it is listed
          in the DynParList array in the Output Parameter File and has its
          mode set to automatic in the task parameter file and its prompt
          string will be preceded by \texttt{*!}.

          Note that parameters with \texttt{vpath} starting with \texttt{GLOBAL}
          will default to being dynamic.
      }
   }
}

\sstroutine{
   executable
}{
   Declare an executable image
}{
   \sstdescription{
      Declares the name of an executable image (usually an ADAM  monolith)
      and defines the actions within the image.
   }
   \sstinvocation{
      executable \textit{image} \{ \textit{definition} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{image}
      }{
         The name of the executable image.
      }
      \sstsubsection{
         \textit{definition}
      }
         A Tcl script defining the executable in terms of the Tcl procedures
         declared for an executable.
      }
   \sstdiytopic{Subcommands}{
      The following keyword is defined within an \texttt{executable} definition:
      \htmlref{\texttt{action}}{action}.
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         executable kappa\_mon \{ ... \}
      }{
         Define the executable image kappa\_mon.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{Opens the monolithic interface file and changes
          the executable image referred to in the \texttt{.icl} and
          \texttt{.csh} files.}
      \sstsubsection{IRAF:}{Opens the \texttt{.tcl} file and changes the
          executable image referred to in the \texttt{.cl} file.}
   }
}

\sstroutine{
   exepath
}{
   Specify the directory containing executables \textit{etc.}
}{
   \sstdescription{
      The specified directory is used in constructing the Starlink package
      definition files \texttt{\textit{package}.icl} and
      \texttt{\textit{package}.csh}.
      IT IS NOT USED IN PRODUCING THE IRAF FILES.

      If not specified, the directory \${\em{PACKAGE}}\_DIR is used.
   }
   \sstinvocation{
      exepath \textit{directory}
   }
   \sstarguments{
      \sstsubsection{
         \textit{directory}
      }{
         The directory specification. This could contain environment variable
         for translation at runtime.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         exepath \{ \$KAPPA\_DIR \}
      }{
         will result in the directory defined by environment variable
         KAPPA\_DIR being used \dash\ for package KAPPA, this is the same
         as the default.
      }
      \ssttabbedexamplesubsection{
         exepath /home/adam4/ajc/kappa
      }{
         will result in directory /home/adam4/ajc/kappa being used.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{As defined.}
      \sstsubsection{IRAF:}{None.}
   }
}

\sstroutine{
   help
}{
   Define the `one-line' help for this parameter
}{
   \sstdescription{
      Currently only for ADAM (see
\xref{SUN/115}{sun115}{}
     for details).
   }
   \sstinvocation{
      helpkey \textit{help\_specifier}
   }
   \sstarguments{
      \sstsubsection{
         \textit{help\_specifier}
      }{
         The text to be displayed if help is requested or a pointer to a
         help-file module.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         help \{ The number of values (between 1 and 10) \}
      }{
         Specifies the text to be displayed if parameter help is requested.
      }
      \ssttabbedexamplesubsection{
         help \{ \%\$KAPPA\_DIR ADD PARAMETERS IN1 \}
      }{
         Specifies the module in which parameter help is to be found.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{Produces an Interface File \texttt{help} field.}
      \sstsubsection{IRAF:}{None.}
   }
}

\sstroutine{
   helpkey
}{
   Define the source of help for this parameter
}{
   \sstdescription{
      Currently only for ADAM (see
\xref{SUN/115}{sun115}{}
     for details).
   }
   \sstinvocation{
      helpkey \textit{help\_specifier}
   }
   \sstarguments{
      \sstsubsection{
         \textit{help\_specifier}
      }{
         A help file and module path.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         helpkey \{ \$KAPPA\_HELP PARAMETERS ADD IN1 \}
      }{
         Specifies the hierarchy within the help file \$KAPPA\_HELP at which
         help on the parameter is found.
      }
      \ssttabbedexamplesubsection{
         helpkey *
      }{
         Specifies the default module for help on the parameter.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{Produces an Interface File \texttt{helpkey} field.}
      \sstsubsection{IRAF:}{None.}
   }
}

\sstroutine{
   helplib
}{
   Specify the pathname of the help library.
}{
   \sstdescription{
      The specified filename is used in constructing ADAM Interface Files
      and the package definition files package.icl, package.csh and
      package.sh.  IT IS
      NOT USED IN PRODUCING THE IRAF FILES.

      If not specified, the directory \${\em{PACKAGE}}\_HELP is used.
   }
   \sstinvocation{
      helplib \textit{library}
   }
   \sstarguments{
      \sstsubsection{
         \textit{library}
      }{
         The name of the help library. This could contain environment variable
         for translation at runtime.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         helplib \$KAPPA\_HELP
      }{
         will result in the file defined by environment variable KAPPA\_HELP
         being used \dash\ for package KAPPA, this is the same as the default.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{As specified.}
      \sstsubsection{IRAF:}{None.}
   }
}

\sstroutine{
   icl
}{
   Lines for output to the \texttt{.icl} file
}{
   \sstdescription{
      Specifies lines of text to be output to the \texttt{.icl} file.
   }
   \sstinvocation{
      icl \{ \textit{text} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{text}
      }{
         The specified text is written to the \texttt{.icl} file. It may consist
         of more than one line. The text should be legal ICL command language.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         icl \{ $\backslash$\{ Define a command to print "Hello"\\
         \tab defstring welcome print "hello" \}
      }{
         Inserts a comment and a defstring command into the \texttt{.icl} file.
         NOTE the \texttt{\{} in the comment must be escaped.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{As defined.}
      \sstsubsection{IRAF:}{None.}
   }
}

\sstroutine{
   in
}{
   Define a set of acceptable values for the parameter
}{
   \sstdescription{
      Currently only for ADAM (see
\xref{SUN/115}{sun115}{}
     for details).
   }
   \sstinvocation{
      in \textit{set}
   }
   \sstarguments{
      \sstsubsection{
         \textit{set}
      }{
         A list of values of appropriate type.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         in { Red White Blue }
      }{
         The acceptable values are: \texttt{Red}, \texttt{White} or
         \texttt{Blue}.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{Produces an Interface File \texttt{in} field.}
      \sstsubsection{IRAF:}{None.}
   }
}

\sstroutine{
   keyword
}{
   Specify the name by which the parameter is known to the user.
}{
   \sstdescription{
      Currently only for ADAM and deprecated. This keyword can be used to
      specify the name by which the parameter is known to the user
      (on the command line and in prompts and messages \emph{etc}).
      It defaults to the parameter name.
   }
   \sstinvocation{
      keyword \{ \textit{name} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{name}
      }{
         The name to be used.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         parameter x\\
         \tab keyword y\\
         \tab \ldots\\
         \}
      }{
         Parameter x will be known as y to the user.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}
         {Produces an Interface File \texttt{keyword} field}
      \sstsubsection{IRAF:}{None.}
   }
}

\sstroutine{
   obey
}{
   Obey a command language command
}{
   \sstdescription{
      A subcommand of
      \htmlref{\texttt{command}}{command}.
      When the defined command is invoked, a command will be obeyed in the
      underlying shell.  Obviously the command will vary depending upon the
      shell in use \dash\ currently Interface Definition Files assume
      \texttt{csh}.
   }
   \sstinvocation{
      obey \{ \textit{command} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{command}
      }{
         The command to be obeyed.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         command abc \{\\
         \tab obey \{ date \}\\
         \}
      }{
         The command \texttt{date} will be obeyed by the underlying
         shell if command \texttt{abc} is obeyed.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}
         {The appropriate commands are written to the \texttt{.icl} and
          \texttt{.csh} files.}. The implementation for ICL means that the
          command is actually obeyed by ICL which will pass most shell commands
          on to the shell.
      \sstsubsection{IRAF:}{The foreign command mechanism is used.}
   }
}

\sstroutine{
   obsolete
}{
   Define an obsolete command
}{
   \sstdescription{
      A subcommand of
      \htmlref{\texttt{command}}{command}.
      If the defined command is invoked, this
      will usually just print the message \dash\ some systems may ignore it
      altogether.
   }
   \sstinvocation{
      obsolete \{ \textit{message} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{message}
      }{
         The message to be displayed if the command is obeyed.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         command abc \{\\
         \tab obsolete \{ Command abc is obsolete - use xyz instead \}\\
         \}
      }{
         The given message will be displayed if command \texttt{abc} is
         obeyed.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}
         {The appropriate commands are written to the \texttt{.icl} and
          \texttt{.csh} files.}
      \sstsubsection{IRAF:}{The foreign command mechanism is used.}
   }
}

\sstroutine{
   outputpar
}{
   Force the parameter value to be output
}{
   \sstdescription{
      Forces the parameter to be treated as an `output' parameter, regardless
      of the specified access mode. For more information, see
\htmlref{`The outputpar keyword'}
{outputpar_key}\latex{ (Section \ref{outputpar_key})}.
   }
   \sstinvocation{
      outputpar
   }
   \sstarguments{
      \sstargsnone
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         parameter INFILE \{\\
         \tab type FILE\\
         \tab access READ\\
         \tab outputpar\\
         \tab ...\\
         \}
      }{
         The name of the file to be read from is generated by the program
         and output as the value of parameter INFILE.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{None.}
      \sstsubsection{IRAF:}{The parameter is listed in the Output Parameter
                            File.}
   }
}

\sstroutine{
   package
}{
   Define a package
}{
   \sstdescription{
      This command declares the name of a package and defines the commands
      \textit{etc.}\ contained in the package.
   }
   \sstinvocation{
      package \textit{pkgname} \{ \textit{definition} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{pkgname}
      }{
         The name of the package. This will be used as the name of the created
         package definition files.
      }
      \sstsubsection{
         \textit{definition}
      }
         A Tcl script defining the package in terms of the Tcl procedures
         declared for a package.
   }
   \sstdiytopic{Subcommands}{
      The following keywords are defined within a \texttt{package} definition:
      \htmlref{\texttt{executable}}{executable},
      \htmlref{\texttt{version}}{version},
      \htmlref{\texttt{exepath}}{exepath},
      \htmlref{\texttt{helplib}}{helplib},
      \htmlref{\texttt{prefix}}{prefix},
      \htmlref{\texttt{display}}{display},
      \htmlref{\texttt{defhelp}}{defhelp},
      \htmlref{\texttt{command}}{command},
      \htmlref{\texttt{icl}}{icl},
      \htmlref{\texttt{csh}}{csh},
      \htmlref{\texttt{sh}}{sh}.
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         package kappa \{\\
         \tab executable kappa\_mon \{\\
         \tab \tab ...\\
         \tab \}\\
         \}
      }{
         Defines the KAPPA package.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{Opens the \texttt{.icl} and \texttt{.csh} files.}
      \sstsubsection{IRAF:}{Opens the \texttt{.cl} file.}
   }
}

\sstroutine{
   parameter
}{
   Define an action parameter
}{
   \sstdescription{
      Declares a parameter name and defines its type \textit{etc.}
   }
   \sstinvocation{
      parameter \textit{name} \{ \textit{definition} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{name}
      }{
         The name of the parameter.
      }
      \sstsubsection{
         \textit{definition}
      }{
         A Tcl script defining the parameter in terms of the Tcl procedures
         declared for a parameter.
      }
   }
   \sstdiytopic{Subcommands}{
      The following keywords are defined within a \texttt{parameter} definition:
      \htmlref{\texttt{position}}{position},
      \htmlref{\texttt{type}}{type},
      \htmlref{\texttt{size}}{size},
      \htmlref{\texttt{access}}{access},
      \htmlref{\texttt{outputpar}}{outputpar},
      \htmlref{\texttt{vpath}}{vpath},
      \htmlref{\texttt{ppath}}{ppath},
      \htmlref{\texttt{association}}{association},
      \htmlref{\texttt{prompt}}{prompt},
      \htmlref{\texttt{default}}{default},
      \htmlref{\texttt{in}}{in},
      \htmlref{\texttt{range}}{range},
      \htmlref{\texttt{help}}{help},
      \htmlref{\texttt{helpkey}}{helpkey},
      \htmlref{\texttt{repeated}}{repeated},
      \htmlref{\texttt{dynamic}}{dynamic}.
      \htmlref{\texttt{keyword}}{keyword}.
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         parameter par1 \{\\
         \tab position 1\\
         \tab type \_REAL\\
         \tab ...\\
         \}
      }{
         Defines parameter \texttt{par1}.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{As specified \dash\ output to the \texttt{.ifl}
                            files.}
      \sstsubsection{IRAF:}{As specified \dash\ output to the \texttt{.par}
                            file.}
   }
}

\sstroutine{
   position
}{
   Define the command line position for this parameter
}{
   \sstdescription{
      defines a command-line `position' for the parameter.
   }
   \sstinvocation{
      position \textit{number}
   }
   \sstarguments{
      \sstsubsection{
         \textit{number}
      }{
         A command line position.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         action act1\\
         \tab parameter x\\
         \tab \tab position 2\\
         \tab \tab \ldots\\
         \tab\}\\
         \tab parameter a\\
         \tab \tab position 1\\
         \tab \tab \ldots\\
         \tab\}\\
         \ldots\\
         \}
      }{
         The command \texttt{act1 5 10} would invoke action \texttt{act1} with
         parameter \texttt{x} set to \texttt{10} and parameter \texttt{x} set
         to \texttt{5}.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{Produces an Interface File \texttt{position} field.}
      \sstsubsection{IRAF:}{Positional parameters are listed first, in the
          correct order, in the \texttt{.par} file.}
   }
}

\sstroutine{
   ppath
}{
   Define a search path for the suggested value in a prompt
}{
   \sstdescription{
      This corresponds with the ADAM PPATH field (see
      \xref{SUN/115}{sun115}{}
      for details).
      The specified search path comprises a space-separated list of one or
      more of:\\
      CURRENT \dash\ The last-used value of the parameter\\
      DEFAULT \dash\ take the static default\\
      DYNAMIC \dash\ take the dynamic default\\
      GLOBAL \dash\ take the value of the associated GLOBAL parameter
   }
   \sstinvocation{
      ppath \textit{search\_path}
   }
   \sstarguments{
      \sstsubsection{
         \textit{search\_path}
      }{
         A space-separated list of possible sources.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         ppath GLOBAL DEFAULT
      }{
         If the associated GLOBAL parameter is not set, use the static
         default.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}
         {The appropriate \texttt{ppath} field is written to the Interface
          File.}
      \sstsubsection{IRAF:}{None.}
   }
}

\sstroutine{
   prefix
}{
   Define a command-name prefix.
}{
   \sstdescription{
      This procedure defines a prefix which may be added to command names
      in the event of ambiguities between command names in different
      packages. It will normally be the first three letters of the package
      name.
   }
   \sstinvocation{
      prefix \textit{prefix}
   }
   \sstarguments{
      \sstsubsection{
         \textit{prefix}
      }{
         The prefix to be used.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         prefix kap
      }{
         `kap' will be used as the optional command name prefix.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{As specified.}
      \sstsubsection{IRAF:}{None.}
   }
}

\sstroutine{
   print
}{
   Define a command to print a message
}{
   \sstdescription{
      A subcommand of
      \htmlref{\texttt{command}}{command}.
      When the defined command is invoked, the
      specified message is displayed to the user.
   }
   \sstinvocation{
      print \{ \textit{message} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{message}
      }{
         The message to be displayed.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         command abc \{\\
         \tab print \{ The XXX application is not available for IRAF. \}\\
         \}
      }{
         The specified text will be displayed if the command \texttt{abc}
         is obeyed.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}
         {The appropriate commands are written to the \texttt{.icl} and
          \texttt{.csh} files.}
      \sstsubsection{IRAF:}{The foreign command mechanism is used.}
   }
}

\sstroutine{
   prompt
}{
   Specify the prompt string
}{
   \sstdescription{
      Specifies the string to be used when prompting for the parameter.
      Starlink user-interfaces will usually also display the parameter
      name and offer a suggested value.
   }
   \sstinvocation{
      prompt \{ \textit{text} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{text}
      }{
         The prompt string.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         prompt \{ Type a REAL number \}
      }{
         If a value for the parameter is required from the user, a prompt
         with the specified text will be given.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}
         {The appropriate \texttt{prompt} field is written to the Interface
          Files.}
      \sstsubsection{IRAF:}
         {The appropriate \texttt{prompt} field is written to the \texttt{.par}
          file.}
   }
}

\sstroutine{
   range
}{
   Define the range of values permitted for the parameter
}{
   \sstdescription{
      Currently only for ADAM (see
\xref{SUN/115}{sun115}{}
     for details).
   }
   \sstinvocation{
      range \textit{min} \textit{max}
   }
   \sstarguments{
      \sstsubsection{
         \textit{min}
      }{
         The minimum acceptable value.
      }
      \sstsubsection{
         \textit{max}
      }{
         The maximum acceptable value.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         range 1 10
      }{
         The value must lie between 1 and 10 inclusive.
      }
      \ssttabbedexamplesubsection{
         range A Z
      }{
         The value must lie between A and Z inclusive.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{Produces an Interface File \texttt{range} field.}
      \sstsubsection{IRAF:}{Set min and max values in the \texttt{.par} file.}
   }
}

\sstroutine{
   repeated
}{
   Parameter value is obtained repeatedly.
}{
   \sstdescription{
      Informs the system that new values for the parameter may be requested
      repeatedly during one invocation of the program.
   }
   \sstinvocation{
      repeated
   }
   \sstarguments{
      \sstargsnone
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         parameter INFILE \{\\
         \tab type FILE\\
         \tab access READ\\
         \tab repeated\\
         \tab ...\\
         \}
      }{
         There may be repeated request for a new value of the parameter INFILE.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{None.}
      \sstsubsection{IRAF:}{The parameter is set to `query' mode.}
   }
}

\sstroutine{
   sh
}{
   Lines for output to the \texttt{.sh} file
}{
   \sstdescription{
      Specifies lines of text to be output to the \texttt{.sh} file.
   }
   \sstinvocation{
      sh \{ \textit{text} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{text}
      }{
         The specified text is written to the \texttt{.sh} file. It may consist
         of more than one line. The text should be legal sh-style
         shell command language.
      }

   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         sh \{ \# Define the help library\\
         \tab KAPPA\_HELP=INSTALL\_HELP/kappa; export KAPPA\_HELP \\
         \}
      }{
         Inserts a comment, and a command to set an environment
         variable, into the \texttt{.sh} file.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{As defined.}
      \sstsubsection{IRAF:}{None.}
   }
}

\sstroutine{
   size
}{
   Define the size of the parameter
}{
   \sstdescription{
      The parameter size may be given as any string (usually \texttt{*}).
      The actual value is not used but some systems needs to know
      if the parameter is a vector or array.
   }
   \sstinvocation{
      size \textit{size}
   }
   \sstarguments{
      \sstsubsection{
         \textit{size}
      }{
         Any string to indicate the size.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         size *
      }{
         Specifies that the parameter takes an array value.
      }
      \ssttabbedexamplesubsection{
         size 2
      }{
         Specifies that the parameter takes an array value.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{None.}
      \sstsubsection{IRAF:}{The parameter is defined as type struct.}
   }
}

\sstroutine{
   task
}{
      Invoke an action with a given set of parameters.
}{
   \sstdescription{
      A subcommand of
      \htmlref{\texttt{command}}{command}.
      When the defined command is invoked, it
      invokes the named action. Fixed and variable parameters for the
      action may be specified. The named action must be in the current
      package and already be defined.

   }
   \sstinvocation{
      task \textit{name} \{ \textit{description} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{name}
      }{
         The name of the action to be invoked.
      }
      \sstsubsection{
         \textit{description}
      }{
         A list of parameter definitions using the
         \htmlref{\texttt{taskparam}}{taskparam} and
         \htmlref{\texttt{taskinherit}}{taskinherit} keywords.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         command abc \{\\
         \tab task xyz \{\\
         \tab \tab taskparam \{method=list\}\\
         \tab \tab taskparam \{value=1.0\}\\
         \tab \tab taskinherit ndf\\
         \}
      }{
         Obeying command \texttt{abc filename} will be equivalent to obeying
         command \texttt{xyz} with parameters \texttt{method} and
         \texttt{value} set as specified and parameter \texttt{ndf} set to
         \texttt{filename}.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}
         {The appropriate command definitions are written to the \texttt{.icl}
          and \texttt{.csh} files. Note that the \texttt{taskinherit} keyword
          has no effect. Anything following the primary command invocation
          will be appended to the invocation of the named action,
          following the fixed parameters.}
      \sstsubsection{IRAF:}{A CL procedure is created and a command defined in
          the package \texttt{.cl} file to run it. The procedure will have
          parameters as defined by any
          \htmlref{\texttt{taskinherit}}{taskinherit}
          keywords and will invoke the named action with the inherited
          parameter values followed by the fixed parameters, all in
          \texttt{keyword=value} form.
      }
   }
}

\sstroutine{
   taskinherit
}{
   Define a parameter name for a \texttt{command task} command
}{
   \sstdescription{
      A subcommand of
      \htmlref{\texttt{task}}{task}.
      Specifies the name of a parameter of the action whose value is to be
      inherited from the top-level command
   }
   \sstinvocation{
      taskinherit \{ \textit{parameter\_name} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{parameter\_name}
      }{
         The name of the parameter
      }
   }
   \sstexamples{
      See \htmlref{\texttt{task}}{task} example.
   }
   \ssteffects{
      \sstsubsection{ADAM:}{None \dash\ anything following the command name
         on the command line will be added, verbatim, to the action
         invocation.}
      \sstsubsection{IRAF:}
         {The created task procedure (see \htmlref{\texttt{task}}{task})
         has a parameter with the given name which is inherited by the
         secondary command.}
   }
}

\sstroutine{
   taskparam
}{
   Define a parameter value for a \texttt{command task} command
}{
   \sstdescription{
      A subcommand of
      \htmlref{\texttt{task}}{task}.
      The parameter specification is added, verbatim, to the invocation of
      the name action.
   \sstinvocation{
      taskparam \{ \textit{parameter\_specification} \}
   }
   \sstarguments{
      \sstsubsection{
         \textit{parameter\_specification}
      }{
         A string to be added to the command line when invoking the named
         action. It may be any string which is legal as a parameter
         of the command specified by the \htmlref{\texttt{task}}{task}
         keyword} but will normally be of the form `\texttt{keyword=value}'.
      }
   }
   \sstexamples{
      See \htmlref{\texttt{task}}{task} example.
   }
   \ssteffects{
      \sstsubsection{ADAM:}
         {The parameter specification is added to the command written to
          the \texttt{.icl} and \texttt{.csh} files.}
      \sstsubsection{IRAF:}
         {The parameter specification is added to the command line in
          the created task procedure (see \htmlref{\texttt{task}}{task})
          which invokes the action.}
   }
}

\sstroutine{
   type
}{
   Define the type of the parameter
}{
   \sstdescription{
      The parameter type may be: \_CHAR, LITERAL, \_DOUBLE, \_INTEGER, \_REAL,
      \_LOGICAL or a structure type (see
      \xref{SUN/115}{sun115}{}
      for details). For environments other than ADAM, suitable choices are made.
   }
   \sstinvocation{
      type \textit{type}
   }
   \sstarguments{
      \sstsubsection{
         \textit{type}
      }{
         The ADAM type of the parameter.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         type \_REAL
      }{
         Specified type \_REAL for the parameter.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{As specified \dash\ output to the \texttt{.ifl}
                            files.}
      \sstsubsection{IRAF:}{ Scalar \_CHAR, LITERAL, \_DOUBLE, \_INTEGER,
         \_REAL and \_LOGICAL types become string, string, real, integer, real
         and boolean respectively. Vectors and arrays are defined as type
         struct (see the
\htmlref{\texttt{size}}{size}
         keyword). All other types are treated as filenames.}
   }
}

\sstroutine{
   version
}{
   Define the version number of the package.
}{
   \sstdescription{
      This is optional. The preferred way of setting the version number into
      package files is to use the PKG\_VERS macro in the makefile at install
      time.
   }
   \sstinvocation{
      version \textit{version\_number}
   }
   \sstarguments{
      \sstsubsection{
         \textit{version\_number}
      }{
         The package version number.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         version V2.1-1
      }{
         Specifies version 2.1-1
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}{None.}
      \sstsubsection{IRAF:}{If defined the version number will be written as
      the value of the version parameter in the \textit{package\texttt{.par}}
      file. If it is not defined, it defaults to `\texttt{PKG\_VERS}'.}
   }
}

\sstroutine{
   vpath
}{
   Define the source of the parameter value.
}{
   \sstdescription{
      This corresponds with the ADAM VPATH field (see
      \xref{SUN/115}{sun115}{}
      for details).
      The specified search path comprises a space-separated list of one or
      more of:\\
      CURRENT \dash\ The last-used value of the parameter\\
      PROMPT \dash\ prompt for the value\\
      DEFAULT \dash\ take the static default\\
      DYNAMIC \dash\ take the dynamic default\\
      GLOBAL \dash\ take the value of the associated GLOBAL parameter\\
      NOPROMPT \dash\ prevents a prompt as a last resort.\\
      INTERNAL \dash\ can only be used alone, implies DYNAMIC,CURRENT,NOPROMPT.
   }
   \sstinvocation{
      vpath \textit{search\_path}
   }
   \sstarguments{
      \sstsubsection{
         \textit{search\_path}
      }{
         A space-separated list of possible sources.
      }
   }
   \sstexamples{
      \ssttabbedexamplesubsection{
         vpath CURRENT DEFAULT
      }{
         If there is no current value, use the static default.
      }
   }
   \ssteffects{
      \sstsubsection{ADAM:}
         {The appropriate \texttt{vpath} field is written to the Interface
          Files.}
      \sstsubsection{IRAF:}{In the absence of a
\htmlref{\texttt{repeated}}{repeated} or
\htmlref{\texttt{dynamic}}{dynamic}
         keyword, the following rules apply: If the first element of the vpath
         is \texttt{PROMPT} or there is no vpath specifier, the IRAF parameter
         is made automatic mode. If the first element is \texttt{GLOBAL}, the
         parameter is made
\htmlref{dynamic}{dynamic_key}.
         In all other cases it is made hidden.}

         The \texttt{repeated} or \texttt{dynamic} keywords will override this
         behaviour.

   }
}

\end{document}
