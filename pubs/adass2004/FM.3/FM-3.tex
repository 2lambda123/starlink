%APN3_PROCEEDINGS_FORM%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% TEMPLATE.TEX -- APN3 (2003) ASP Conference Proceedings template.
%
% Derived from ADASS VIII (98) ASP Conference Proceedings template
% Updated by N. Manset for ADASS IX (99), F. Primini for ADASS 2000,
% D.Bohlender for ADASS 2001, and H. Payne for ADASS XII and LaTeX2e.
%
% Use this template to create your proceedings paper in LaTeX format
% by following the instructions given below.  Much of the input will
% be enclosed by braces (i.e., { }).  The percent sign, "%", denotes
% the start of a comment; text after it will be ignored by LaTeX.  
% You might also notice in some of the examples below the use of "\ "
% after a period; this prevents LaTeX from interpreting the period as
% the end of a sentence and putting extra space after it.  
% 
% You should check your paper by processing it with LaTeX.  For
% details about how to run LaTeX as well as how to print out the User
% Guide, consult the README file.  You should also consult the sample
% LaTeX papers, sample1.tex and sample2.tex, for examples of including
% figures, html links, special symbols, and other advanced features.
%
% If you do not have access to the LaTeX software or a laser printer
% at your site, you can still prepare your paper following the
% instructions in the User Guide.  In such cases, the editors will
% process the file and make any necessary editorial adjustments.
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 
\documentclass[11pt,twoside]{article}  % Leave intact
\usepackage{adassconf}

% If you have the old LaTeX 2.09, and not the current LaTeX2e, comment
% out the \documentclass and \usepackage lines above and uncomment
% the following:

%\documentstyle[11pt,twoside,adassconf]{article}

\begin{document}   % Leave intact

%-----------------------------------------------------------------------
%			    Paper ID Code
%-----------------------------------------------------------------------
% Enter the proper paper identification code.  The ID code for your
% paper is the session number associated with your presentation as
% published in the official conference proceedings.  You can           
% find this number locating your abstract in the printed proceedings
% that you received at the meeting or on-line at the conference web
% site; the ID code is the letter/number sequence proceeding the title 
% of your presentation. 
%
% This will not appear in your paper; however, it allows different
% papers in the proceedings to cross-reference each other.  Note that
% you should only have one \paperID, and it should not include a
% trailing period.
%
% EXAMPLE: \paperID{O4-1}
% EXAMPLE: \paperID{P7-7}
%

\paperID{FM-3}

%-----------------------------------------------------------------------
%		            Paper Title 
%-----------------------------------------------------------------------
% Enter the title of the paper.
%
% EXAMPLE: \title{A Breakthrough in Astronomical Software Development}
% 
% If your title is so long as to fill the page header when you print it,
% then please supply a short form as a \titlemark.
%
% EXAMPLE: 
%  \title{Rapid Development for Distributed Computing, with Implications
%         for the Virtual Observatory}
%  \titlemark{Rapid Development for Distributed Computing}
%

\title{TOPCAT \& STIL: Starlink Table/VOTable Processing Software}
%\titlemark{ }

%-----------------------------------------------------------------------
%		          Authors of Paper
%-----------------------------------------------------------------------
% Enter the authors followed by their affiliations.  The \author and
% \affil commands may appear multiple times as necessary (see example
% below).  List each author by giving the first name or initials first
% followed by the last name.  Authors with the same affiliations
% should grouped together. 
%
% EXAMPLE: \author{Raymond Plante, Doug Roberts, 
%                  R.\ M.\ Crutcher\altaffilmark{1}}
%          \affil{National Center for Supercomputing Applications, 
%                 University of Illinois Urbana-Champaign, Urbana, IL
%                 61801}
%          \author{Tom Troland}
%          \affil{University of Kentucky}
%
%          \altaffiltext{1}{Astronomy Department, UIUC}
%
% In this example, the first three authors, "Plante", "Roberts", and
% "Crutcher" are affiliated with "NCSA".  "Crutcher" has an alternate 
% affiliation with the "Astronomy Department".  The fourth author,
% "Troland", is affiliated with "University of Kentucky"

\author{Mark B.\ Taylor}
\affil{Starlink,
       Bristol University,
       H.~H.~Wills Physics Laboratory,
       Tyndall Avenue,
       Bristol}

%-----------------------------------------------------------------------
%			 Contact Information
%-----------------------------------------------------------------------
% This information will not appear in the paper but will be used by
% the editors in case you need to be contacted concerning your
% submission.  Enter your name as the contact along with your email
% address.
% 
% EXAMPLE:  \contact{Dennis Crabtree}
%           \email{crabtree@cfht.hawaii.edu}
%

\contact{Mark Taylor}
\email{m.b.taylor@bristol.ac.uk}

%-----------------------------------------------------------------------
%		      Author Index Specification
%-----------------------------------------------------------------------
% Specify how each author name should appear in the author index.  The 
% \paindex{ } should be used to indicate the primary author, and the
% \aindex for all other co-authors.  You MUST use the following
% syntax: 
%
% SYNTAX:  \aindex{Lastname, F. M.}
% 
% where F is the first initial and M is the second initial (if
% used).  This guarantees that authors that appear in multiple papers
% will appear only once in the author index.  
%
% EXAMPLE: \paindex{Crabtree, D.}
%          \aindex{Manset, N.}        
%          \aindex{Veillet, C.}        
%
% NOTE: this information is also used to build the author list that
% appears in the table of contents.  Authors will be listed in the order
% of the \paindex and \aindex commmands.
%

\paindex{Taylor, M. B.}
% \aindex{ }     % Remove this line if there is only one author

%-----------------------------------------------------------------------
%		      Author list for page header	
%-----------------------------------------------------------------------
% Please supply a list of author last names for the page header. in
% one of these formats:
%
% EXAMPLES:
% \authormark{Lastname}
% \authormark{Lastname1 \& Lastname2}
% \authormark{Lastname1, Lastname2, ... \& LastnameN}
% \authormark{Lastname et al.}
%
% Use the "et al." form in the case of seven or more authors, or if
% the preferred form is too long to fit in the header.

\authormark{Taylor}

%-----------------------------------------------------------------------
%			Subject Index keywords
%-----------------------------------------------------------------------
% Enter a comma separated list of up to 6 keywords describing your
% paper.  These will NOT be printed as part of your paper; however,
% they will be used to generate the subject index for the proceedings.
% There is no standard list; however, you can consult the indices
% for past proceedings (http://adass.org/adass/proceedings/).
%
% EXAMPLE:  \keywords{visualization, astronomy: radio, parallel
%                     computing, AIPS++, Galactic Center}
%
% In this example, the author noticed that "radio astronomy" appeared
% in the ADASS VII Index as "astronomy" being the major keyword and
% "radio" as the minor keyword.  The colon is used to introduce another
% level into the index.

\keywords{VOTable,
          catalogs,
          Virtual Observatory,
          software: applications,
          software: data analysis,
          java}

%-----------------------------------------------------------------------
%			       Abstract
%-----------------------------------------------------------------------
% Type abstract in the space below.  Consult the User Guide and Latex
% Information file for a list of supported macros (e.g. for typesetting 
% special symbols). Do not leave a blank line between \begin{abstract} 
% and the start of your text.

\begin{abstract}          % Leave intact
% Place the text of your abstract here - NO BLANK LINES
%
The Starlink Tables Infrastructure Library (STIL) is a pure-Java,
open source library for I/O and manipulation of tabular data such as
astronomical catalogs.  It is written to be high-performance, and to
cope with large tables (not limited by available memory).
The core library is format-neutral, with the work of serialization
and deserialization performed by pluggable format-specific I/O handlers.
This means that the programmer seees a high-level abstraction of a table
which is easy to work with, and also that support for new data 
formats can be added easily.
Supplied handlers provide support for 
VOTables, FITS table extensions, relational databases via SQL 
and plain text tables, amongst others.
The VOTable handler, which has VOTable-specific as well as generic 
table features, is believed to be the only existing library 
capable of reading or writing all the defined VOTable 
serialization formats ({\sc TABLEDATA}, {\sc FITS}, {\sc BINARY}).

TOPCAT, based on STIL, is a user-friendly graphical program for 
viewing, analysis and modification of tables.
It has facilities for plotting, cross matching, row selection, 
sorting and metadata manipulation.
Synthetic columns can be created and row selections made using a 
powerful and extensible algebraic expression language.
\end{abstract}

%-----------------------------------------------------------------------
%			      Main Body
%-----------------------------------------------------------------------
% Place the text for the main body of the paper here.  You should use
% the \section command to label the various sections; use of
% \subsection is optional.  Significant words in section titles should
% be capitalized.  Sections and subsections will be numbered
% automatically. 
%
% EXAMPLE:  \section{Introduction}
%           ...
%           \subsection{Our View of the World}
%           ...
%           \section{A New Approach}
%
% It is recommended that you look at the sample papers, sample1.tex
% and sample2.tex, for examples for formatting references, footnotes,
% figures, equations, html links, lists, and other special features.  

\section{Introduction}

Tables are common in astronomy, and are a
prominent feature of the data produced, transmitted and consumed by
human and software elements of the Virtual Observatory.
The fact that the VOTable format is one of the first standards to become an 
\htmladdnormallinkfoot{IVOA 
  recommendation}{http://www.ivoa.net/Documents/latest/VOT.html}
bears witness to this observation.
A common example of astronomical tabular data is an object catalogue, 
but other examples, such as event lists, are important too.
This paper describes STIL, a library for generic I/O and processing of
tables, and TOPCAT, a graphical user application built on top of STIL.
Both of these products are open source 
(released under the Gnu Public Licence) and pure Java (J2SE1.4),
which makes them highly portable and easy to deploy.
They were developed for the Starlink Project.

\section{STIL}

The \htmladdnormallinkfoot{Starlink Tables Infrastructure Library
                   (STIL)}{http://www.starlink.ac.uk/stil/} 
is a generic I/O
and processing library for tabular data.
Central to STIL is a relatively simple model of what a table is, namely
a data structure which has
\begin{itemize}
\item Some per-table metadata, 
      such as name, textual description, curation metadata...
\item Some per-column metadata,
      such as a name, textual description, unit information, 
      Uniform Content Descriptor etc for each column, as well as 
      a description of the shape and type of data it holds 
      (integer, string etc)
\item Cell data themselves, in the form of an entry per column 
      for each of a number of rows
\end{itemize}
The {\tt StarTable} Java language interface embodies this data model,
and it is {\tt StarTable} objects that the programmer deals with
when manipulating tables within STIL.

STIL has no native external data format, but a number of pluggable
input and output handlers.  Input handlers perform the job of 
deserializing tables from external storage and turning them into 
StarTables, while output handlers perform the opposite task of taking
a StarTable and serializing it to external storage.
Since these I/O handlers are separate from the core processing code,
it is easy to change their implementation and add new ones 
without affecting application code.
In this way the application programmer does not need to know or
care whether the table he is manipulating has been obtained from
a VOTable, FITS HDU, comma-separated value file, or an SQL query
on a relational database.  Moreover, new handlers can be plugged
in at runtime, so that an existing application based on STIL can 
be reconfigured to read and write new table storage 
formats without any modifications to the code.
This way of working
resembles the way that Java's JDBC database communication layer works.
A schematic diagram of this architecture is given in Figure~\ref{FM3-fig-1}.
\begin{figure}
\epsscale{0.8}
\plotone{FM-3_1.eps}
\caption{Schematic of STIL architecture.} \label{FM3-fig-1}
\end{figure}

Among the I/O handlers supplied are ones which can read/write 
the VOTable format, 
FITS BINTABLE and TABLE extensions, 
relational databases, 
and a number of text-based formats.
A corollary of this architecture is that conversion between any of the
supported formats is trivial, and STIL comes with a simple
command-line utility {\tt tablecopy} which performs this task.

As well as I/O, STIL provides a number of facilities for manipulation 
of tables including ways to add, remove and rearrange columns and rows,
join and split tables, and modify data and metadata.
Flexible and efficient facilities for cross-matching are also distributed
with the library, though these are currently not properly documented
and somewhat experimental.

Care has been taken to make the I/O and processing facilities scalable
throughout STIL; the aim in particular is that it should be possible 
to process a table with an umlimited number of rows 
in a limited amount of memory.  
The {\tt StarTable} interface provides both sequential and random
methods of data access for different processing requirements; 
in the former limited memory use can be achieved
by streaming the data a row at a time, and in the latter by
caching the cell data in a temporary disk file.

STIL is fully documented; the public classes have comprehensive javadocs,
and a user document, 
\htmladdnormallink{SUN/252}{http://www.starlink.ac.uk/stil/sun252/}, 
which contains examples and overview
documentation is available in HTML and PDF formats.

\subsection{STIL for VOTables}

As noted above, one of the formats supported by STIL is the XML-based
VOTable format.  Since this is of particular importance in the Virtual
Observatory era, and because it has some notable features, there follow
a few comments on this handler in particular.

The STIL VOTable parser is, as far as we know, the only one
which fully supports the VOTable standard.
Although other available parsers can read the pure-XML {\sc TABLEDATA} 
variant of the format, no others can read the {\sc FITS} and {\sc BINARY} 
variants.
For reasons of bandwidth and CPU efficiency, {\sc TABLEDATA} is inappropriate
for encoding very large amounts of data, so this ability is of
considerable significance.  As well as reading,
STIL also makes it easy to write VOTables in any of the three variants.

By use of custom stream-based (SAX) parsing, it is also able to
provide a hierarchical in-memory view (DOM) of the structure of a 
VOTable document even when very large tables are involved without
the customary disadvantage of heavy memory usage.


\section{TOPCAT}

\htmladdnormallinkfoot{TOPCAT}{http://www.starlink.ac.uk/topcat/}
is a graphical user application for viewing, analysis and editing
of tables.  Being based on STIL it can read and write multiple
table formats, and is extensible to new ones in the same way.
It is not in practice able to cope with tables of unlimited size,
but is happy to manipulate fairly large ones; on a normal desktop
machine tables of order $10^6$ rows $\times$ $10^2$ columns can be 
processed easily.
The program can be deployed in a number of ways, including as a WebStart 
application or from a single local jar file.
Comprehensive user documentation is available either in PDF or HTML
form, or from within the program's context-sensitive help browser.

The program offers many ways to view and manipulate the data and metadata
of tables.  Some of the actions it permits are:
\begin{itemize}
\item View/edit table data in a scrollable browser
\item View/edit table and column metadata
\item Re-order, hide and unhide existing columns
\item Insert algebraically-defined `synthetic' columns
\item Sort the rows
\item Define row subsets (selections of the rows) in various ways, 
      including graphically and algebraically
\item Plot columns against each other, distinguishing different row subsets
\item Calculate statistics on each column for some or all rows
\item Perform cross-matching between tables or within a table
\item Concatenate the rows of existing tables to create new ones
\end{itemize}
Some, though by no means all, of the key capabilities are 
described in more detail in the remaining sections.

\subsection{Plotting}

The Plot Window displays a scatter-plot of values from one of a table's
columns against those of another.  The columns can be selected 
interactively, and logarithmic or reversed axes may be selected if
desired.  It is easy to zoom in and out to focus on regions of interest
in the plot.  If multiple row subsets have been defined, they will be
plotted with different symbols, and the user can select which subsets are 
displayed and control the kinds of plotting symbols that are used.  
New subsets can be defined by marking them out by 
indicating a rectangular region or drawing an arbitrary shape or shapes
with the mouse.
The plot currently in view can be exported at any time to Postscript or
GIF format.

\subsection{Joining Tables}

TOPCAT provides flexible and efficient facilities for cross-matching,
either between two or more tables, or internally to a single one.
A number of match criteria are possible; the most common one is
a maximum angular separation between two (RA,Dec) points on the
celestial sphere, but also available are criteria based on 
field equivalence, isotropic or anisotropic Cartesian separation
in one, two or more dimensions, and combinations of these.
In most cases, the speed of the match algorithm
scales as $O(N \log N)$, where $N$ is the total number of rows
involved.

It is also possible to concatenate two tables ``head-to-toe'' by
specifying the correspondence of columns between them.

\subsection{Algebraic Expressions}

A powerful feature of TOPCAT is the ability to create new columns 
or specify row subsets algebraically.  In both cases the user 
enters a textual expression in which the names or identifiers of
table columns serve as variable names; this expression 
can be evaluated for each row with each column identifier evaluating
to that column's entry in the row.  The expression thus defines a
new `synthetic' column, and if this has a boolean value it can be
taken to define a row subset (if it evaluates true for a given row,
that row is taken to be included).

The expression syntax is powerful and extensible; expressions are
actually written in the Java language and compiled directly.
This means that the full power of a programming language can be
used to define operations.  A number of functions such as arithmetic,
trigonometric and string manipulations are initially available,
but this can be augmented by the user by writing Java
classes which define new functions and making them known to the program
at run time.  Despite this flexibility, it is in many cases easy for
the non-specialist to specify algebraic expressions; 
for instance to create a new column which contains the average
of columns named {\sc rmag} and {\sc bmag}, it is only necessary to enter the
expression ``{\tt (RMAG+BMAG)*0.5}''.

\subsection{Activation Actions}

Facilities exist in TOPCAT to focus on a particular row of a table,
which can be useful for instance if it is an outlier in some sense.
If you click on the row in the table browser, the corresponding point
becomes highlighted in the plot window, and vice versa.
It is also possible to cause other actions to take place when a row
is ``activatted'' in this way; one possibility is to make a request to a
cutout server to retrieve an image of the sky region around
the selected row.  There are pre-packaged facilities to query 
servers for 2MASS quick-look, SDSS or DSS cutouts, but it is possible
to configure almost any action (defined by user-supplied classes)
to occur on such activations.





%-----------------------------------------------------------------------
%			      References
%-----------------------------------------------------------------------
% List your references below within the reference environment
% (i.e. between the \begin{references} and \end{references} tags).
% Each new reference should begin with a \reference command which sets
% up the proper indentation.  Observe the following order when listing
% bibliographical information for each reference:  author name(s),
% publication year, journal name, volume, and page number for
% articles.  Note that many journal names are available as macros; see
% the User Guide listing "macro-ized" journals.   
%
% EXAMPLE:  \reference Hagiwara, K., \& Zeppenfeld, D.\  1986, 
%                Nucl.Phys., 274, 1
%           \reference H\'enon, M.\  1961, Ann.d'Ap., 24, 369
%           \reference King, I.\ R.\  1966, \aj, 71, 276
%           \reference King, I.\ R.\  1975, in Dynamics of Stellar 
%                Systems, ed.\ A.\ Hayli (Dordrecht: Reidel), 99
%           \reference Tody, D.\  1998, \adassvii, 146
%           \reference Zacharias, N.\ \& Zacharias, M.\ 2003,
%                \adassxii, \paperref{P7.6}
% 
% Note the following tricks used in the example above:
%
%   o  \& is used to format an ampersand symbol (&).
%   o  \'e puts an accent agu over the letter e.  See the User Guide
%      and the sample files for details on formatting special
%      characters.  
%   o  "\ " after a period prevents LaTeX from interpreting the period 
%      as an end of a sentence.
%   o  \aj is a macro that expands to "Astron. J."  See the User Guide
%      for a full list of journal macros
%   o  \adassvii is a macro that expands to the full title, editor,
%      and publishing information for the ADASS VII conference
%      proceedings.  Such macros are defined for ADASS conferences I
%      through XI.
%   o  When referencing a paper in the current volume, use the
%      \adassxii and \paperref macros.  The argument to \paperref is
%      the paper ID code for the paper you are referencing.  See the 
%      note in the "Paper ID Code" section above for details on how to 
%      determine the paper ID code for the paper you reference.  
%
\begin{references}




\end{references}

% Do not place any material after the references section

\end{document}  % Leave intact
