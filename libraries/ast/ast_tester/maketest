#!/bin/tcsh

if( "$1" == "" ) then
   echo "Usage: maketest <test>"
   echo "   (e.g. maketest regions)"
   exit
endif

set a = "test$1"

echo "Building $a"
if( "$a" == "testplot3d" ) then
   g95 -fno-second-underscore -ftrace=full -w -g -o testplot3d testplot3d.f \
       -L$GITSTAR/lib -I$GITSTAR/include \
       `ast_link -ems -pgplot3d` `sla_link` `chr_link` `err_link`

else if( -e "$a.f" ) then
   g95 -fno-second-underscore  -ftrace=full -w -g -o $a $a.f -L$GITSTAR/lib -I$GITSTAR/include \
       `ast_link -ems` `chr_link` `err_link` `prm_link` `psx_link`

else if( -e "$a.c" ) then
   gcc -o $a -g $a.c -I.. -L$GITSTAR/lib `ast_link`

else
   echo "Cannot find $a.f or $a.c"

endif

#setenv G95_FPU_DENORMAL T
#setenv G95_FPU_INVALID T
#setenv G95_FPU_ZERODIV T
#setenv G95_FPU_OVERFLOW T

echo "Running $a"
$a

