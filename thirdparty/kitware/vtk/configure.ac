dnl    Process this file with autoconf to produce a configure script
AC_REVISION($Revision: 24276 $)

dnl    Initialisation: package name and version number
AC_INIT(vtk, 5.0.3, ussc@star.rl.ac.uk)

dnl    Require autoconf-2.50 at least
AC_PREREQ(2.50)
dnl    Require Starlink automake
AM_INIT_AUTOMAKE(1.8.2-starlink)

dnl    Sanity-check: name a file in the source directory -- if this
dnl    isn't found then configure will complain
AC_CONFIG_SRCDIR([VTK/CMakeLists.txt])

dnl    Include defaults for Starlink configurations
STAR_DEFAULTS

dnl    Dependencies. Main one is Mesa which ensures we have an OpenGL
dnl    API, but that's a stub on machines with hardware OpenGL or Mesa
dnl    already installed. Tcl and Tk are needed for the Tcl support.
STAR_DECLARE_DEPENDENCIES([build], [mesa tcl tk])

dnl    VTK and CMake do not use any autotools, so most of this is a
dnl    complete fudge. Configuration consists of running bootstrap in CMake
dnl    (this also does a basic build). Make runs the local cmake and then
dnl    make in the VTK directory.
(
   cmd="cd cmake && ./bootstrap";\
   echo $cmd; \
   eval $cmd
)
           
STAR_SPECIAL_INSTALL_COMMAND([
   ( cd VTK; $(MAKE) DESTDIR=$$DESTDIR install );
])

AC_CONFIG_FILES([Makefile component.xml])

AC_OUTPUT
